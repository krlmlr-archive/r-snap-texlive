\ProvidesFile{fstrutst.tex}[2011/03/14 test/demo finstrut.sty (DA/UL)] 
\documentclass{article} 
\usepackage{readprov}
\usepackage{array}
\usepackage[fullpar,show]{finstrut}[2011/02/18] %% upd. 2011/03/14
\makeatletter
  % with array.sty
    \@ifpackageloaded{array}{%
        \def\arraytest{%
          \begin{tabular}{|l|b{2cm}|}\hline
              b alignment & b alignment\par \\\hline
          \end{tabular}
            \nobreak\hfill
          \begin{tabular}{|l|b{2cm}|}\hline
              b alignment & b alignment \\\hline
          \end{tabular}
          \par\medskip\noindent
        }%
      }{\let\arraytest\relax}
\makeatother
\textheight=3.5in
\begin{document}
  \begin{center}
    \bfseries 
      Trying \textsf{finstrut} 
      \UseVersionOf{finstrut.sty} as of \UseDateOf{finstrut.sty}
  \end{center}
% \edef\latexoutput{\the\output}
% \output{\tracingonline=1 \showboxbreadth=10 \showboxdepth=1 
%         \showbox\footins
%         \latexoutput
%         \global\output\expandafter{\latexoutput}}
% \makeatletter \let\@finalstrut\@gobble \makeatother %% WITHOUT
\begin{tabular}{|l|p{2cm}|}\hline
    deep & $\displaystyle \int_j$\par \\\hline
\end{tabular}
  \nobreak\hfill
\begin{tabular}{|l|p{2cm}|}\hline
    deep & $\displaystyle \int_j$\\\hline
\end{tabular}
  \par\medskip\noindent\nobreak\hfil
\begin{tabular}{|l|p{2cm}|}\hline
    bad prevdepth & Hello world\hrule \\\hline
\end{tabular}
\nobreak\hfil
%% irrelevant according to Donald 2011/02/15:
%   \nobreak\hfill
% \begin{tabular}{|l|p{2cm}|}\hline
%     bad prevdepth & Hello world \\\hline
% \end{tabular}
  \par\medskip\noindent
\arraytest
O\footnote{\vrule depth22.22pt\par} 
A\footnote{x\par} 
B\footnote{y\par} 
O\footnote{\vrule depth22.22pt}
A\footnote{x} 
B\footnote{y}
\end{document}
