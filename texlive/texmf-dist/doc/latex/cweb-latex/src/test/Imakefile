XCOMM $Id: Imakefile,v 1.9 1995/11/20 22:34:44 schrod Exp $
/* ---------------------------------------------------------------------- */

/*
 * Imakefile for test of cweb bundle
 *
 * (history at end)
 */


/* needed modules */
#define idx NO_IDX_CLEAN	/* don't delete *.idx on make clean */
#include <TeX.imk>
#undef idx

XCOMM ------------------------------------------------------------
XCOMM continue in Imakefile

.SUFFIXES: .tex .w

.w.tex:									@@\
	if [ -r $*.ch ] ; \						@@\
	   then	cweave $* $* ; \					@@\
	   else	cweave $* ; \						@@\
	fi


regression:: clean
	$(MAKE) all


/* ============================================================
 *
 * 	tests for cweb class & cwebarray package
 */

TeXTarget(latex,minimal)		/* minimal document */
TeXTarget(latex,token)			/* rendering of tokens */
TeXTarget(latex,refname)		/* refinement names, filename ref. */
TeXTarget(latex,modes)			/* cweb FSA */
TeXTarget(latex,section)		/* hierarchic document structure */
TeXTarget(latex,flat)			/* flat document structure */
TeXTarget(latex,report)			/* report as base class */
TeXTarget(latex,nolists)		/* nolists via CWEAVE option -x */
TeXTarget(latex,newif)			/* idiosyncrasy of old LateX version */

TeXTarget(latex,enddocbegin)		/* skip stuff after \end{document} */
TeXTarget(latex,vbar)			/* ruled table [cwebarray] */
TeXTarget(latex,titlepage)		/* titlepage option */

TeXTarget(latex,language-german)	/* language option german */
TeXTarget(latex,german)			/* babel-compatible option german */

TeXTarget(latex,change)			/* changefile-related output */
TeXTarget(latex,sup-changes)		/* changefile-related suppression */

TeXTarget(latex,sup-lists)		/* suppression of index & reflist */
TeXTarget(latex,sup-format)		/* suppression of format directives */

TeXTarget(latex '\nonstopmode \input',badend)	/* unknown \end expansion */
TeXTarget(latex '\nonstopmode \input',badopts)	/* unknown & illegal options */


/*
 * Special (additional) rules for targets above
 */

nolists.tex: nolists.w
	cweave -x nolists

change.tex: change.ch

sup-changes.tex: sup-changes.w change.ch
	cweave sup-changes change



/* ============================================================
 *
 * 	tests for packages
 */

/* cwebparts */

TeXTarget(latex,parts)			/* CWEB parts in LaTeX document */

parts.dvi: parts-code.tex

parts-code.tex: parts-code.w
	cweave -x parts-code



/* ============================================================
 *
 * Tests for stuff that is not strictly part of the cweb bundle.
 */

TeXTarget(latex,keyvald)   		/* keyword-value options w/ defaults */


realclean:: clean
	rm -f *.idx *.scn *.tex



/* ============================================================
 *
 * $Log: Imakefile,v $
 * Revision 1.9  1995/11/20  22:34:44  schrod
 *     Test language support, actually for German.
 *
 * Revision 1.8  1995/11/07  18:28:52  schrod
 *     Add test newif, for old LaTeX version.
 *
 * Revision 1.7  1995/09/17  14:21:36  schrod
 *     Test package cwbl-german.
 *
 * Revision 1.6  1995/09/16  17:02:09  schrod
 *     Test cwebparts.sty.
 *
 * Revision 1.5  1995/09/12  22:32:21  schrod
 *     Add test case for output of CWEAVE with `-x' option.
 *
 * Revision 1.4  1995/08/29  15:22:14  schrod
 *     Add test of format directive suppression.
 *
 * Revision 1.3  1995/08/27  13:29:38  schrod
 *     Tests of options & changefile-related suppression.
 *
 * Revision 1.2  1995/08/25  19:12:39  schrod
 * Test implementation of hierarchic and flat structure.
 *
 * Revision 1.1  1995/08/08  00:14:46  schrod
 * Updated to \LaTeXe{}, the |cweb| style is now a document class.
 *

 * ------------------------------------------------------------
 * Local Variables:
 * mode: Indented-Text
 * End:
 */
