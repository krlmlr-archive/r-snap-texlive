%%
%% This is file `mtc-tsf.tex',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% minitoc.dtx  (with options: `mtc-tsf')
%% This is a generated file.
%% 
%% 
%% This file may be distributed and/or modified under the conditions of
%% the LaTeX Project Public License, either version 1.3 of this license
%% or (at your option) any later version.  The latest version of this
%% license is in:
%% 
%%    http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of LaTeX version
%% 2003/12/01 or later.
%% 
%% This work has the LPPL maintenance status "author-maintained".
%% 
%% This Current Maintainer of this work is Jean-Pierre F. Drucbert (JPFD).
%% 
%% This work consists of all the files listed in the file `minitoc.l'
%% distributed with it.
%% Copyright 1993 1994 1995 1996 1997 1998 1999 2000
%%           2001 2002 2003 2004 2005 2006 2007 2008
%% Jean-Pierre F. Drucbert
%% <jean-pierre.drucbert@onera.fr>
\documentclass{report}
\ProvidesFile{mtc-tsf.tex}[2008/04/03]%
\usepackage{fullpage}
\usepackage[config=altsf]{subfig}
\usepackage[tight]{minitoc}
\newdimen\testtemp
\newcommand{\ru}[1]{%
  \testtemp #1%
  \advance\testtemp .5pt \divide\testtemp 2%
  \hbox to \testtemp{\leaders\hbox to 1mm{%
    \vrule height1mm depth0pt width.25pt\hfil}\hfil}%
  \hbox to 0pt{\hss\vrule height3mm depth0pt width.25pt\hss}%
  \hbox to \testtemp{\leaders\hbox to 1mm{%
    \hfil\vrule height1mm depth0pt width.25pt}\hfil}}
%%
\fboxsep=-\fboxrule
\newcommand{\figbox}[1]{%
  \fbox{\vbox to 1in{%
      \vfil\hbox to 2in{\parbox{2in}{\centering #1}}\vfil
      \vbox to 0pt{\vss\hbox to 2in{\hfil\ru{1.1in}\hfil}}}}}
\begin{document}
\setcounter{lofdepth}{2} \dominilof \listoffigures
\newpage
\chapter{Reference Test}
\minilof \mtcskip
\mtcsetdepth{minilof}{1}
\minilof

\begin{figure}[ht]%
  \centering
  \subfigure{%
    \label{fig+A}\figbox{SUBFIGURE ONE:\\(no opt)}}
  \quad
  \subfigure[]{%
    \label{fig+B}\figbox{SUBFIGURE TWO:\\(empty opt)}}\\

  \subfigure[Subfigure Three.]{%
    \label{fig+C}\figbox{SUBFIGURE THREE:\\(opt)}}
  \quad
  \subfigure[][Subfigure Four.]{%
    \label{fig+D}\figbox{SUBFIGURE FOUR:\\(empty opt and opt)}}
  \quad
  \subfigure[][]{%
    \label{fig+E}\figbox{SUBFIGURE FIVE:\\(both empty opt)}}\\

  \subfigure[The Sixth Subfigure.][Subfigure Six.]{%
    \label{fig+F}\figbox{SUBFIGURE SIX:\\(both opt)}}
  \quad
  \subfigure[The Seventh Subfigure][]{%
    \label{fig+G}\figbox{SUBFIGURE SEVEN:\\(opt and empty opt)}}

  \caption{Optional argument test.}%
  \label{fig+main}%
\end{figure}

The figure~\ref{fig+main} on page~\pageref{fig+main} is composed
of the seven subfigures~\subref{fig+A} (aka: \ref{fig+A}),
\subref{fig+B} (aka: \ref{fig+B}), \subref{fig+C} (aka: \ref{fig+C}),
\subref{fig+D} (aka: \ref{fig+D}), \subref{fig+E} (aka: \ref{fig+E}),
\subref{fig+F} (aka: \ref{fig+F}), and \subref{fig+G} (aka: \ref{fig+G}).

\section{Centering Test}
Note that figures~\ref{fig+B}, \ref{fig+E} and \ref{fig+G} are centered.
This means that \verb|\subfigcapskip| has been set to zero and is not
offsetting the simple label to the left.  Also the remaining captioned
subfigures (figures~\ref{fig+C}, \ref{fig+D}, and \ref{fig+F}) should
have centered labels.
\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
\endinput
%%
%% End of file `mtc-tsf.tex'.
