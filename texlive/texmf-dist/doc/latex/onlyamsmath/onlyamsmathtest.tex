\documentclass[fleqn]{article}
\usepackage[all,warning]{onlyamsmath}
%\usepackage[all]{onlyamsmath}

\begin{document}
\author{Harald Harders}
\title{Test of the package onlyamsmath.sty}

\maketitle
\tableofcontents
\listoffigures

\section{A section title with an embedded equation $\alpha$}

Normal inlined equations $a^2+b^2=c^2$ should work.

Formulae in figures were a problem in version 0.1 and 0.2. 
Test wheather they work now in Fig.~\ref{fig:example}.
\begin{figure}
  \centering
  Test
  \caption{Here we have formulae $\alpha$, $\beta$, $\vec{a}$.\dots}
  \label{fig:example}
\end{figure}

\subsection{Allowed \texttt{amsmath} environments}

The \verb|align| environment is part of \verb|amsmath.sty| and
therefor works, too:
\begin{align}
  \sin^2x + \cos^2x &=1\,,\\
  \tan\alpha &= \frac{\sin\alpha}{\cos\alpha}\,.
\end{align}
\verb|equation| is redefined and allowed:
\begin{equation}
  \sin^2x + \cos^2x = 1\,.
\end{equation}
\verb|equation*| is defined by \verb|amsmath.sty| and allowed:
\begin{equation*}
  \sin^2x + \cos^2x = 1\,.
\end{equation*}
\verb|gather|:
\begin{gather}
  \sin^2x + \cos^2x =1\,,\\
  \tan\alpha = \frac{\sin\alpha}{\cos\alpha}\,.
\end{gather}
\verb|gather*|:
\begin{gather*}
  \sin^2x + \cos^2x =1\,,\\
  \tan\alpha = \frac{\sin\alpha}{\cos\alpha}\,.
\end{gather*}
\verb|multiline|:
\begin{multline}
  \sin^2x +  0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 \\
  + 0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 +  \cos^2x =1\,.
\end{multline}
\verb|multiline*|:
\begin{multline*}
  \sin^2x +  0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 \\
  + 0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 +  \cos^2x =1\,.
\end{multline*}
\verb|\[| is redefined and works:
\[
  \sin^2x + \cos^2x = 1\,.
\]



\subsection{Forbidden \TeX\ and \LaTeX\ environments}

\verb|eqnarray| is forbidden:
\begin{eqnarray}
  \sin^2x + \cos^2x &=& 1\,.
\end{eqnarray}
\verb|eqnarray*| is also forbidden:
\begin{eqnarray*}
  \sin^2x + \cos^2x &=& 1\,.
\end{eqnarray*}
Same for \verb|displaymath|:
\begin{displaymath}
  \sin^2x + \cos^2x = 1\,.
\end{displaymath}
And of course \verb|$$| (thanks to David Kastrup):
$$
  \sin^2x + \cos^2x = 1\,.
$$

\end{document}
