% This file is part of the "lettre" package.
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Vincent Belaïche.
%
% This work consists of all files listed in README.
\usepackage[strict]{changepage}
\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\edef\lettre@lamargeimpaire@stantarde{\the\oddsidemargin}
\edef\lettre@lamargepaire@stantarde{\the\evensidemargin}
\edef\lettre@lalargeurdutexte@stantarde{\the\textwidth}
\topmargin-20pt\relax
\textheight240mm\relax
\newcommand*\lettreRedefinitMarges{
  \changetext%
  {0pt}% text height => no change
  {\dimexpr170mm-\lettre@lalargeurdutexte@stantarde}% text width
  {\dimexpr-1in+25mm-\lettre@lamargepaire@stantarde}% even side margin
  {\dimexpr-1in+25mm-\lettre@lamargeimpaire@stantarde}% odd side margin
  {0pt}% column sep => no change
}
\newcommand*\lettreRestaureMarges{
  \changetext%
  {0pt}% text height => no change
  {\dimexpr\lettre@lalargeurdutexte@stantarde-170mm}% text width
  {\dimexpr\lettre@lamargepaire@stantarde+1in-25mm}% even side margin
  {\dimexpr\lettre@lamargeimpaire@stantarde+1in-25mm}% odd side margin
  {0pt}% column sep => no change
}

\lettreRedefinitMarges

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{tocdepth}{4}%
\setcounter{secnumdepth}{4}%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% http://www.laposte.fr/particulier/courriers-colis/conseils-pratiques/bien-rediger-l-adresse-d-une-lettre-ou-d-un-colis
% personalisation de la page de titre
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\lrulefill}[1]{\leaders\hrule height#1\hfill\kern\z@}%
%\renewcommand{\and}{\\}%
\newcommand{\@inserthautg}{}%
\newcommand{\@inserthautd}{}%
\newcommand{\@insertbasg}{}%
\newcommand{\@insertbasd}{}%
\renewcommand{\maketitle}{\begin{titlepage}\setcounter{page}{0}\let\footnotesize\small
 \let\footnoterule\relax\null\vfill
                             \mbox{\@inserthautg\@inserthautd}%
                             \vfill
 \begin{flushright}%
   \mbox{}\lrulefill{1pt}\\[5mm]{\LARGE\bf \@title}\\[3mm]%
   \mbox{}\lrulefill{1pt}\\%
 \end{flushright}\par\vfill
                     \mbox{\@insertbasg\@insertbasd}%
                     \vfill
   {\Large\lineskip .75em\relax
    \begin{tabular}[b]{@{}l@{}}\@author\end{tabular}}\hfill
   {\large\begin{tabular}[b]{@{}r@{}}\@date\end{tabular}}\par
 \mbox{}\lrulefill{1pt}\\\end{titlepage}%
\setcounter{footnote}{0}\let\thanks\relax\let\maketitle\relax
\gdef\@thanks{}\gdef\@author{}\gdef\@title{}}%
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%modifs pour utiliser babel
\let\fsc\textsc
\let\vers\verb
\let\versatim\verbatim
\let\endversatim\endverbatim
\newcommand*{\see}[2]{\textit{voir}\ #1}
\newcommand*{\seealso}[2]{\textit{voir aussi}\ #1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeindex
\input{path.tex}
\begin{document}
\selectlanguage{francais}
%
\newdimen\indentedwidth
\indentedwidth=\textwidth
\advance\indentedwidth by-91mm\relax
%
\newcommand{\dhfam}{\fontencoding{OT1}%
                    \fontfamily{cmdh}%
                    \fontseries{m}%
                    \fontshape{n}}%
\newcommand{\ldcmd}{\dhfam\fontsize{10}{12pt}\selectfont}%
\newcommand{\ldCmd}{\dhfam\fontsize{12}{14pt}\selectfont}%
\newcommand{\LDCMD}{\dhfam\fontsize{14}{17pt}\selectfont}%
\newcommand{\trfam}{\fontencoding{T1}%
                    \fontfamily{ptm}%
                    \fontseries{m}%
                    \fontshape{n}}%
\newcommand{\treit}{\trfam\fontsize{8}{10pt}\selectfont}%
\newcommand{\trten}{\trfam\fontsize{10}{12pt}\selectfont}%
\newcommand{\trtwelf}{\trfam\fontsize{12}{14pt}\selectfont}%
\newcommand{\trfvtn}{\trfam\fontsize{15}{18pt}\selectfont}%
\newcommand{\hvfam}{\fontencoding{T1}%
                    \fontfamily{phv}%
                    \fontseries{m}%
                    \fontshape{n}}%
\newcommand{\hvten}{\hvfam\fontsize{10}{12pt}\selectfont}%
\newcommand{\hvtwfv}{\hvfam\fontsize{25}{30pt}\selectfont}%
%
\makeatletter
\renewcommand{\@inserthautg}{%
\vrule height4cm depth0pt width0pt
\hspace{1.5cm}\rput{-20}(0,2){\fbox{\includegraphics[scale=.15]{letex1-1.ps}}}%
\hspace{2cm}\rput*{-20}(0,2){\fbox{\includegraphics[scale=.15]{letex2-1.ps}}}%
}%
\renewcommand{\@inserthautd}{%
\hspace{11cm}\rput{20}(0,2){\fbox{\includegraphics[scale=.15]{testfaxf-1.ps}}}%
\hspace{-2cm}\rput*{-20}(0,2){\fbox{\includegraphics[scale=.15]{testfaxf-2.ps}}}%
}%
\renewcommand{\@insertbasg}{%
\vrule height4cm depth0pt width0pt
\hspace{1.5cm}\rput{20}(0,2){\fbox{\includegraphics[scale=.15]{letex8-1.ps}}}%
\hspace{2cm}\rput*{-20}(0,2){\fbox{\includegraphics[scale=.15]{letex8-2.ps}}}%
}%
\renewcommand{\@insertbasd}{%
\hspace{11cm}\rput{20}(0,2){\fbox{\includegraphics[scale=.15]{letex7-2.ps}}}%
\hspace{-2cm}\rput*{20}(0,2){\fbox{\includegraphics[scale=.15]{letex7-1.ps}}}%
}%
\makeatother
\title{{\huge\bf De la correspondance avec \LaTeXe}\\[3mm]
        {\Large\bf La classe L{\large\bf ETTRE} de l'Observatoire de Gen\`eve\\[2mm]Version \versnum}}%
\author{Denis \fsc{M\'egevand}\\
        Observatoire de Gen\`eve\\
        CH-1290 {\bf Sauverny}}%
\date{\today}%
\maketitle
\pagestyle{myheadings}%
\markboth{\it La classe \sc Lettre \it de l'Observatoire de Gen\`eve}%
         {\it De la correspondance fran\c{c}aise avec \LaTeXe}%
%
\pagenumbering{roman}
\setcounter{page}{2}
%
\noindent La figure suivante montre les diff\'erents champs d'une lettre\index{lettre} touch\'es par les commandes de mise en page. Les commandes ou environnements obligatoires sont indiqu\'es par un ast\'erisque. Les champs pr\'esents par d\'efaut sont indiqu\'es par un petit cercle. Les champs sans autre indication n'apparaissent que s'ils sont explicitement appel\'es. \\[2mm]
\begin{center}
\framebox{\footnotesize
\setlength{\unitlength}{.75mm}
\begin{picture}(160,250)
%
\put(11,241){\circle{2}}
\put(13,240){\makebox(0,0)[bl]{\tt \char`\\address}}
\put(13,235){\makebox(0,0)[bl]{\tt \char`\\location}}
\put(11,231){\circle{2}}
\put(13,230){\makebox(0,0)[bl]{\tt \char`\\telephone}}
\put(11,226){\circle{2}}
\put(13,225){\makebox(0,0)[bl]{\tt \char`\\notelephone}}
\put(11,221){\circle{2}}
\put(13,220){\makebox(0,0)[bl]{\tt \char`\\fax}}
\put(11,216){\circle{2}}
\put(13,215){\makebox(0,0)[bl]{\tt \char`\\nofax}}
\put(13,210){\makebox(0,0)[bl]{\tt \char`\\email}}
%
\put(91,241){\circle{2}}
\put(93,240){\makebox(0,0)[bl]{\tt \char`\\lieu}}
\put(91,236){\circle{2}}
\put(93,235){\makebox(0,0)[bl]{\tt \char`\\nolieu}}
\put(121,241){\circle{2}}
\put(123,240){\makebox(0,0)[bl]{\tt \char`\\date}}
\put(121,236){\circle{2}}
\put(123,235){\makebox(0,0)[bl]{\tt \char`\\nodate}}
%
\put(90,210){\makebox(0,0)[bl]{\tt *\char`\\begin\{letter\}\{\%}}
\put(110,205){\makebox(0,0)[bl]{{\it nom}{\tt\char`\\\char`\\}}}
\put(110,200){\makebox(0,0)[bl]{{\it adresse}{\tt\char`\\\char`\\}}}
\put(110,195){\makebox(0,0)[bl]{{\it suite}{\tt[\char`\\\char`\\}{\it etc}{\tt]\}}}}
%
\put(15,155){\makebox(0,0)[bl]{\tt \char`\\Vref}}
\put(55,155){\makebox(0,0)[bl]{\tt \char`\\Nref}}
\put(95,155){\makebox(0,0)[bl]{\tt \char`\\telex}}
\put(135,155){\makebox(0,0)[bl]{\tt \char`\\ccp}}
%
\put(15,140){\makebox(0,0)[bl]{\tt \char`\\conc}}
%
\put(15,120){\makebox(0,0)[bl]{\tt *\char`\\opening}}
\put(15,110){corps de la lettre}
\put(15,100){\makebox(0,0)[bl]{\tt *\char`\\closing}}
%
\put(110,75){\makebox(0,0)[bl]{\tt *\char`\\name}}
\put(110,70){\makebox(0,0)[bl]{\tt \char`\\signature}}
\put(110,65){\makebox(0,0)[bl]{\tt \char`\\secondsignature}}
\put(110,60){\makebox(0,0)[bl]{\tt \char`\\thirdsignature}}
%
\put(15,40){\makebox(0,0)[bl]{\tt \char`\\cc}}
\put(15,35){\makebox(0,0)[bl]{\tt \char`\\encl}}
\put(15,30){\makebox(0,0)[bl]{\tt \char`\\mencl}}
\put(15,25){\makebox(0,0)[bl]{\tt \char`\\ps}}
%
\put(0,5){\line(1,0){155}}
\put(0,0){\makebox(0,0)[bl]{\tt \char`\\username}}
\put(40,0){\makebox(0,0)[bl]{\tt \char`\\ccitt}}
\put(60,0){\makebox(0,0)[bl]{\tt \char`\\internet}}
\put(90,0){\makebox(0,0)[bl]{\tt \char`\\bitnet}}
\put(115,0){\makebox(0,0)[bl]{\tt \char`\\telepac}}
\put(140,0){\makebox(0,0)[bl]{\tt \char`\\decnet}}
%
\end{picture}}
\end{center}
%
\vfill\pagebreak
\noindent La figure suivante montre les diff\'erents champs d'un t\'el\'efax\index{telefax@t\'el\'efax} touch\'es par les commandes de mise en page. Les indications sont d\'ecrites \`a la page pr\'ec\'edente. De plus, les textes en caract\`eres romains sont toujours pr\'esents, mais peuvent \^etre modifi\'es (voir la partie \ref{partadapt}). Les filets inutiles disparaissent.\\[2mm]
\begin{center}
\framebox{\footnotesize
\setlength{\unitlength}{.75mm}
\begin{picture}(160,250)
%
\put(11,241){\circle{2}}
\put(13,240){\makebox(0,0)[bl]{\tt \char`\\address}}
%
\put(100,240){\makebox(0,0)[bl]{\ldcmd T\'EL\'EFAX}}
%
\put(11,226){\circle{2}}
\put(13,225){\makebox(0,0)[bl]{\tt \char`\\telephone}}
\put(51,226){\circle{2}}
\put(53,225){\makebox(0,0)[bl]{\tt \char`\\fax}}
\put(93,225){\makebox(0,0)[bl]{\tt \char`\\email}}
\put(133,225){\makebox(0,0)[bl]{\tt \char`\\telex}}
%
\put(0,220){\line(1,0){155}}
%
\put(0,213){\makebox(0,0)[bl]{\`A:}}
\put(20,213){\makebox(0,0)[bl]{\tt *\char`\\begin\{telefax\}\{}}
\put(110,213){\makebox(0,0)[bl]{{\it num\'ero}{\tt\}\{\%}}}
\put(20,208){\makebox(0,0)[bl]{{\it nom}{\tt\char`\\\char`\\}}}
\put(20,203){\makebox(0,0)[bl]{{\it adresse}{\tt\}}}}
%
\put(0,193){\makebox(0,0)[bl]{De:}}
\put(20,194){\circle{2}}
\put(22,193){\makebox(0,0)[bl]{\tt \char`\\location}}
\put(80,193){\makebox(0,0)[bl]{Nombre de pages:~}}
\put(120,194){\circle{2}}
\put(122,193){\makebox(0,0)[bl]{\tt \char`\\addpages}}
%
\put(0,188){\line(1,0){155}}
%
\put(0,181){\makebox(0,0)[bl]{\small\bf\sl En cas de mauvaise transmission, appelez s.v.p. l'op\'erateur}}
%
\put(0,178){\line(1,0){155}}
%
\put(91,161){\circle{2}}
\put(93,160){\makebox(0,0)[bl]{\tt \char`\\lieu}}
\put(91,156){\circle{2}}
\put(93,155){\makebox(0,0)[bl]{\tt \char`\\nolieu}}
\put(121,161){\circle{2}}
\put(123,160){\makebox(0,0)[bl]{\tt \char`\\date}}
\put(121,156){\circle{2}}
\put(123,155){\makebox(0,0)[bl]{\tt \char`\\nodate}}
%
\put(15,140){\makebox(0,0)[bl]{\tt \char`\\conc}}
%
\put(15,120){\makebox(0,0)[bl]{\tt *\char`\\opening}}
\put(15,110){corps du t\'el\'efax}
\put(15,100){\makebox(0,0)[bl]{\tt *\char`\\closing}}
%
\put(110,75){\makebox(0,0)[bl]{\tt *\char`\\name}}
\put(110,70){\makebox(0,0)[bl]{\tt \char`\\signature}}
\put(110,65){\makebox(0,0)[bl]{\tt \char`\\secondsignature}}
\put(110,60){\makebox(0,0)[bl]{\tt \char`\\thirdsignature}}
%
\put(15,40){\makebox(0,0)[bl]{\tt \char`\\cc}}
\put(15,35){\makebox(0,0)[bl]{\tt \char`\\encl}}
\put(15,30){\makebox(0,0)[bl]{\tt \char`\\mencl}}
\put(15,25){\makebox(0,0)[bl]{\tt \char`\\ps}}
%
\put(0,5){\line(1,0){155}}
\put(0,0){\makebox(0,0)[bl]{\tt \char`\\username}}
\put(40,0){\makebox(0,0)[bl]{\tt \char`\\ccitt}}
\put(60,0){\makebox(0,0)[bl]{\tt \char`\\internet}}
\put(90,0){\makebox(0,0)[bl]{\tt \char`\\bitnet}}
\put(115,0){\makebox(0,0)[bl]{\tt \char`\\telepac}}
\put(140,0){\makebox(0,0)[bl]{\tt \char`\\decnet}}
%
\end{picture}}
\end{center}
%
\cleardoublepage
\tableofcontents
\cleardoublepage
\listoffigures
\cleardoublepage
%
\setcounter{section}{0}
\index{internet|see {adresse}}
\index{bitnet|see {adresse}}
\index{decnet|see {num\'ero}}
\index{telepac|see {num\'ero}}
\index{fax|see{t\'el\'efax}}
\index{telecopie@t\'el\'ecopie|see{t\'el\'efax}}
\index{warning|see{message d'avertissement}}
%
\pagenumbering{arabic}
\subsection*{Introduction}
\addcontentsline{toc}{section}{Introduction}
\noindent La classe {\tt lettre}\index{lettre.cls@{\tt lettre.cls}} est une adaptation \`a \LaTeXe\ du style {\tt lettre}\index{lettre.sty@{\tt lettre.sty}} d\'evelopp\'e \`a l'Observatoire sous \LaTeX\ 2.09. Celui-ci \'etait lui-m\^eme un d\'eveloppement bas\'e sur {\tt letter.sty}\index{letter.sty@{\tt letter.sty}} permettant de composer avec \LaTeX\ des {\bf lettres}\index{lettre} ou des {\bf t\'el\'efax\index{telefax@t\'el\'efax}}, d\'ecrits ci-dessous par le terme g\'en\'erique de {\bf message\index{message}}, dont l'allure correspond mieux aux usages francophones.\footnote{Bien qu'existent des commandes permettant de changer la langue\index{langue} du message\index{message}. (voir page \pageref{seclang})}\\[2mm] 
Un certain nombre de commandes\index{commandes} permettent de formatter le message\index{message} ou les champs annexes \`a celui-ci que sont les \index{adresse}adresses, \index{entete@ent\^ete}ent\^etes, ou autres informations auxiliaires. Certaines de ces commandes\index{commandes} ne s'appliquent qu'aux lettres\index{lettre}, d'autres qu'aux t\'el\'efax\index{telefax@t\'el\'efax}, enfin, un certain nombre de caract\'eristiques sont communes aux deux \index{environnement}environnements. Ceci se retrouve dans ce document, dont la premi\`ere partie d\'ecrit l'\index{environnement}environnement sp\'ecifique des lettres\index{lettre}, la seconde les t\'el\'efax\index{telefax@t\'el\'efax}, alors que la troisi\`eme contient l'information commune aux deux types de messages. La fin du manuel d\'ecrit les commmandes sp\'ecifiques \`a l'Observatoire, et la mani\`ere d'adapter cette classe \`a un autre institut.\\[2mm]
On peut \'ecrire {\bf autant de  lettres\index{lettre} qu'on le d\'esire dans le m\^eme fichier} d'entr\'ee. Les coordonn\'ees de l'\index{expediteur@exp\'editeur}exp\'editeur \'etant en g\'en\'eral les m\^emes pour toutes les lettres\index{lettre}, elles peuvent \^etre d\'efinies par d\'efaut\index{commandes}\index{commandes!d\'efaut} (voir \`a la partie \ref{partinst}). Des commandes\index{commandes} suppl\'ementaires et/ou \index{commandes!facultatives}facultatives g\`erent la mise en page de lignes d'indications, de la langue\index{langue} de la lettre\index{lettre}, et de champs facultatifs comme les post-scriptums, les annexes, etc\ldots\\[2mm]
Les commandes\index{commandes} se placent soit entre \cs{begin\{letter\}} et \index{opening@\cs{opening}}\cs{opening} \footnote{Toutes les commandes\index{commandes} de formattage.}, soit entre \index{closing@\cs{closing}}\cs{closing} et \index{letter@\cs{end\{letter\}}}\cs{end\{letter\}}\footnote{Toutes les commandes\index{commandes} d\'ecrivant les paragraphes suppl\'ementaires en fin de lettre\index{lettre}. (voir page \pageref{seccomsup})}, \`a l'exception de \cs{makelabels}\index{makelabels@\cs{makelabels}} (voir page \pageref{etiquettes}) et \cs{institut}\index{institut@\cs{institut}} (voir page \pageref{institut}).\\[2mm]
Par esprit de sym\'etrie, et bien qu'on ne puisse mettre qu'{\bf un seul t\'el\'efax\index{telefax@t\'el\'efax} par fichier}, pour des raisons d\'ecrites plus loin, l'\index{environnement}environnement {\tt telefax} place ses commandes\index{commandes} de la m\^eme mani\`ere.\\[2mm]
Des fichiers \og gabarit\fg{}, et quelques exemples aident l'utilisateur \`a \'ecrire ses premiers messages\index{message}.\\[2mm]
Tout au long de la compilation, lorsqu'il d\'ecouvre des commandes lui demandant de recouvrir ou de remplir
certains champs, ou de se comporter d'une mani\`ere non-standard\index{comportement!standard} ou
ill\'egale\index{comportement!illegal@ill\'egal}, {\tt lettre.cls}\index{lettre.cls@{\tt lettre.cls}} affiche
\`a la console et dans le fichier {\tt .log} un message\index{message} d'information et d'avertissement ayant
respectivement les formes suivantes:\\[2mm]
\verb|Class lettre Message: Ligne auxiliaire demandee.|\index{message!d'information}\\
\verb|Class lettre Warning: Position de la premiere etiquette ignoree.|\index{message!d'avertissement}\\[2mm]
Les messages d'informations peuvent \^etre supprim\'es ou affich\'es (d\'efaut) en tout temps par les
commandes \cs{noinfos}\index{noinfos@\cs{noinfos}} ou \cs{infos}\index{infos@\cs{infos}}\\[2mm]
Depuis le 17 mai 2013, la maintenance de \og lettre\fg{} est assurée par
\href{mailto:vincentb1@users.sourceforge.net}{Vincent Belaïche}.\\[2mm] 
Bonne \index{correspondance}correspondance \`a toutes et \`a tous \ldots

{\sl 
 \vspace*{1cm}
 \hfill Denis \fsc{M\'egevand}\\
 \vspace*{0pt}
 \hfill Sauverny, le 19 mai 2013}
\vspace*{\fill}

\subsection*{Historique et remerciements}
\addcontentsline{toc}{section}{Historique et remerciements}
Le fichier \texttt{\versnum-release-notes} ci-dessous d\'etaille
l'historique\index{historique} des modifications de la classe lettre. Je
tiens \`a remercier\index{remerciements} toutes les personnes ayant fait
des propositions, des suggestions ou des remarques qui ont permis
d'améliorer la classe (voir les noms dans le texte ci-dessous).

\verbatiminput{release-notes.txt}
\vspace*{\fill}

\subsection*{Rapports d'anomalies}
\addcontentsline{toc}{section}{Rapport d'anomalies}
\label{sec:rapports-danomalies}

La classe \texttt{lettre} est sous la forge \texttt{GNA!} à cette adresse réticulaire~:

\begin{center}
  \url{https://gna.org/projects/lettre_observatoire}
\end{center}

Les rapports d'anomalie doivent être postés dans la rubrique \og Anomalies\fg{} à cette adresse. Il est
nécessaire d'avoir créé un compte sous \texttt{GNA!} préalablement à l'envoi d'un rapport d'anomalie, ceci
permet en effet de joindre l'auteur du rapport.

Vous pouvez aussi nous joindre par la liste de discussion suivante~:

\begin{center}
  \url{mailto:lettre_observatoire-aide@gna.org}
\end{center}

\subsection*{Évolutions futures}
\addcontentsline{toc}{section}{Évolutions futures}

Ci-après se trouve une liste des demandes d'évolutions faites via différents forums --- notamment
\texttt{fr.comp.text.tex} --- ou en s'adressant directement à moi~:
\begin{itemize}
\item Faire une version \cs{Ps} de \cs{ps} avec un seul argument obligatoire.
\item Mettre en place un système clef-valeur pour les réglages.
\item Permettre l'ajout simple d'autre types de téléphone pour l'adresse.
\end{itemize}

\section{Installation}
\label{sec:installation}

\subsection{Installation de la version publique}
\label{sec:installation-pub}

Veuillez procéder comme il suit~:
\begin{enumerate}
\item Récupérez l'archive compressée \texttt{lettre.zip}, vous la trouverez sur le \texttt{CTAN}
  (\url{http://www.ctan.org/pkg/lettre}) ou sur la zone de téléchargement de \texttt{GNA!}
  (\url{http://download.gna.org/lettre_observatoire/}).
\item Décompressez la dans un répertoire \meta{temp}
\item Placez les fichiers \texttt{lettre.pdf} et \texttt{ALIRE} de \meta{temp}\texttt{/lettre} sous un
  répertoire \meta{texmf}\texttt{/doc/latex/lettre}, où \meta{texmf} est un répertoire ayant une arborescence
  TDS et que \texttt{latex} scrute pour trouver les paquetages --- avec la distribution \texttt{MiKTeX} le
  répertoire \meta{texmf} est soit le répertoire d'installation de \texttt{MiKTeX} soit un répertoire déclaré
  dans la liste des \texttt{Root} avec l'utilitaire d'administration.
\item Placez les fichiers \texttt{lettre.cls} et \texttt{default.ins} de \meta{temp}\texttt{/lettre} sous un
  répertoire \meta{texmf}\texttt{/tex/latex/lettre}.
\item Mettre à jour la base de donnée de noms de fichier de \texttt{latex} --- avec la distribution
  \texttt{MiKTeX} cliquez sur le bouton \texttt{Refresh FNDB} dans l'utilitaire d'administation.
\end{enumerate}

Normalement avec la distribution \texttt{MiKTeX} le gestionnaire de paquetages permet de faire tout ça
automatiquement pour les archives publiées sur le \texttt{CTAN}, par contre si vous désirez prendre l'archive
sur \texttt{GNA!} pour avoir une version plus récente il faut procéder comme expliqué plus haut.

\subsection{Installation à partir des sources}
\label{sec:installation-src}

Si vous voulez avoir la version de développement, il faut que l'outil de gestion de version \verb+svn+ soit
installé sur votre machine.  Si c'est le cas, veuillez alors procéder comme il suit~:

\begin{enumerate}
\item Créez un répertoire \meta{classe lettre} quelque part sur votre disque
\item Ouvrez une console, changez le répertoire courant pour aller sur \meta{classe lettre}, et lancez la
  commande \verb+svn+ d'extraction (\verb+checkout+ en langue anglaise, aussi abrégée en \verb+co+). Vous
  pouvez selon la configuration de votre réseau soit utiliser le protocole \verb+svn+ (TCP 3690) comme cela~:\\[2mm]
  \verb+svn co svn://svn.gna.org/svn/lettre_observatoire/trunk lettre_observatoire+\\[2mm]
  soit le protocole \verb+http+ comme cela~:\\[2mm]
  \verb+svn co http://svn.gna.org/svn/lettre_observatoire/trunk lettre_observatoire+\\[2mm]
  Si par exemple votre connexion internet passe par un proxy, alors il est improbable que ça marchera avec le
  protocole \verb+http+.\\
  Pour plus de détails se référer à \url{https://gna.org/svn/?group=lettre_observatoire}.
\item La commande précédente doit avoir créé un sous-répertoire \verb+lettre_observatoire+ sous le répertoire
  \meta{classe lettre}, ajoutez alors ce répertoire \meta{classe lettre}\verb+/lettre_observatoire+ aux
  racines connues de votre compilateur \LaTeX. Si votre distribution est MiKTeX il suffit d'aller dans
  l'onglet \og Roots\fg\ de l'outil d'administration.
\end{enumerate}

\section{Utilisation}
\label{sec:utilisation}

\subsection{Options du paquetage}
\label{sec:options-du-paquetage}
\markright{\it Partie \thesection: \rm Options du paquetage}

\subsubsection{Mise en forme}
\label{sec:polic-de-caract}


\noindent\verb+10pt+\index{taille de police!10pt}, \verb+11pt+\index{taille de police!11pt}, et \verb+12pt+\index{taille de police!12pt} font ce que leur nom indique en ce qui concerne la taille de
police de caractères. \verb+10pt+ est l'option par défaut.\\[2mm]
\noindent\verb+a4paper+\index{a4paper} force les dimension \cs{paperheight} et \cs{paperwidth} respectivement à
\SI{297}{\milli\metre} et \SI{210}{\milli\metre}.\\[2mm]
\noindent\verb+twoside+\index{twoside} et \verb+oneside+\index{oneside} indique que l'impression se fait
recto-verso ou seulement recto. Ceci a une importance si la commande \cs{makelabels} est utilisé dans
l'en-tête du document, en effet en cas recto verso on assure que les étiquettes commencent sur une page
impaire. \verb+oneside+ est l'option par défaut.
\noindent\verb+draft+\index{draft} et \verb+final+\index{final} permettent de mettre en vedette (si
\verb+draft+) ou non (si \verb+final+) les hbox trop larges en insérant un filet à droite du texte en cas de
débordement. \verb+final+ est la valeur par défaut.\\[2mm]


\subsubsection{Équations}
\label{sec:equations}

\noindent\verb+leqno+\index{numérotation des équations à gauche!leqno}, force la numérotation à gauche des
équation en mode \cs{displaymath}.\\[2mm]
\noindent\verb+fleqno+\index{alignement des équations à gauche!fleqno}, force l'alignement à gauche des
équation en mode \cs{displaymath}.

\subsubsection{Langue}

\noindent\verb+francais+ \verb+romand+ \verb+allemand+ \verb+americain+ \verb+anglais+ permettent de définir
la langue par défaut des messages.

\subsubsection{Date du message}
\label{sec:date-du-message}

\noindent\verb+origdate+ enclenche un mécanisme permettant de conserver la date
d'origine\index{date!d'origine} de la lettre, même lors d'une compilation ult\'erieure~: la date est
sauvegardée dans un fichier auxiliaire (\meta{jobname}\texttt{.odt}), \`a l'int\'erieur d'une macro, si
celle-ci n'existe pas. La date d'origine sauvegardée est celle d'une premi\`ere compilation, c'est à dire~:
\begin{itemize}
\item soit la date courante de la compilation si aucune commande \cs{date} est utilisée ou \cs{nodate},
\item soit la date sp\'ecifi\'ee par la commande \cs{date} si cette commande est utilisée,
\item soit la date vide (pas de date) si la commande \cs{nodate} est utilisée.
\end{itemize}
Lors d'une compilation ultérieure, lorsque ce fichier \meta{jobname}\texttt{.odt} existe et qu'il contient la
macro, la date enregistrée dans celle-ci est utilisée, c'est à dire que quelque soit la modification de
spécification par \cs{date}, \cs{nodate} ou ni l'un ni l'autre, cela est sans effet. Lorsque plusieurs
lettres sont dans le même document, chaque lettre crée dans ce fichier une macro qui lui est propre.


\subsection{Des lettres}\label{partlettre}
\markright{\it Partie \thesection: \rm Des lettres}

\noindent Cette partie d\'ecrit les commandes\index{commandes} sp\'ecifiques \`a l'\index{environnement}environnement
{\tt letter}, et en particulier au formattage de l'\index{entete@ent\^ete}ent\^ete. Certaines
commandes\index{commandes} d\'ecrites ici se retrouvent dans la partie t\'el\'efax\index{telefax@t\'el\'efax}, o\`u elles ont un comportement l\'eg\`erement diff\'erent.
\vfill\pagebreak

\vspace*{0pt}%
\noindent
\framebox[\textwidth]{%
\begin{minipage}[t]{70mm}
  \centering \trfvtn \rule{0pt}{1.4\baselineskip}Denis M\'egevand\\[2mm]
             \trtwelf 1F, chemin des Pontets\\
                  CH-1291 Commugny\\
                  Suisse\\[2mm]
                  T\'el: +41(22) 776 23 07\\
		  Fax: +41(22) 776 36 32
\end{minipage}
\hspace{20mm}
\begin{minipage}[t]{\indentedwidth}
   Commugny, le \today
\end{minipage}
}
\newcounter{mesfig}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl L'ent\^ete et la date d'une lettre}
\addcontentsline{lof}{figure}{\themesfig.~~~L'ent\^ete et la date d'une lettre}
\end{center}
\vspace{3mm}

\subsubsection{De l'ent\^ete}

\noindent\index{address@\cs{address}}\label{address}\cs{address}\marg{adresse}\index{lettre}  
\index{adresse}D\'efinit l'adresse de l'\index{expediteur@exp\'editeur}exp\'editeur, utilis\'ee dans l'\index{entete@ent\^ete}ent\^ete de la lettre\index{lettre}, comme ci-dessus. Cette commande est \index{commandes!facultatives}facultative, et est remplac\'ee par d\'efaut par l'\index{adresse!institutionnelle}adresse définie dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+} L'adresse est simplement plac\'ee dans une \vers+parbox+, et tout le formattage est laiss\'e au soin de l'utilisateur.\\[2mm]
\index{lieu@\cs{lieu}}\label{lieu}\cs{lieu}\marg{texte} indique le lieu d'envoi, avant la \index{date}date, en haut et \`a droite de la lettre\index{lettre}. Cette commande  est \index{commandes!facultatives}facultative, et est remplac\'ee par d\'efaut par le lieu défini dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}. Pour supprimer compl\'etement le lieu, utiliser \index{nolieu@\cs{nolieu}}\cs{nolieu}. \\[2mm]
\index{date@\cs{date}}\cs{date}\marg{texte} permet de sp\'ecifier une \index{date}date fixe pour la
lettre\index{lettre}. Utile pour pr\'e-- ou post\index{date}dater une lettre\index{lettre}. Cette commande est
\index{commandes!facultatives}facultative et est remplac\'ee par d\'efaut par la \index{date}date du jour dans
la langue\index{langue} courante (voir page \pageref{seclang}). Pour supprimer compl\'etement la
\index{date}date, utiliser \index{nodate@\cs{nodate}}\cs{nodate}.\footnote{L'option \texttt{origdate} de la
  classe \texttt{lettre.cls} permet de conserver la date de la première compilation lors des compilations
  ultérieures tant que le fichier \texttt{.odt} est conservé. Voir \S~\ref{sec:date-du-message}}\index{origdate@\vers+origdate+}\index{fichier!odt@\verb+.odt+}\\[2mm]
\index{location@\cs{location}}\cs{location}\marg{texte} sert \`a pr\'eciser l'\index{entete@ent\^ete}ent\^ete ci-dessus, en indiquant par exemple, le d\'epartement ou la personne concern\'ee. Cette commande est \index{commandes!facultatives}facultative, et n'est pas remplac\'ee par d\'efaut. \\[2mm]
\index{telephone@\cs{telephone}}\label{telephone}\cs{telephone}\marg{num\'ero} sp\'ecifie le num\'ero de \index{telephone@t\'el\'ephone}\index{numero@num\'ero!telephone@t\'el\'ephone}t\'el\'ephone devant appara\^{\i}tre sous l'\index{entete@ent\^ete}ent\^ete. Cette commande est \index{commandes!facultatives}facultative, et est remplac\'ee par d\'efaut par le num\'ero défini dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}. Pour supprimer compl\'etement la ligne du \index{telephone@t\'el\'ephone}\index{numero@num\'ero!telephone@t\'el\'ephone}t\'el\'ephone, utiliser \index{notelephone@\cs{notelephone}}\cs{notelephone}.\\[2mm]
\index{fax@\cs{fax}}\label{fax}\cs{fax}\marg{num\'ero} sp\'ecifie le num\'ero de \index{numero@num\'ero!telefax@t\'el\'efax}t\'el\'efax devant appara\^{\i}tre sous l'\index{entete@ent\^ete}ent\^ete. Cette commande est \index{commandes!facultatives}facultative, et est remplac\'ee par d\'efaut par le num\'ero défini dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}. Pour supprimer compl\'etement la ligne du \index{numero@num\'ero!telefax@t\'el\'efax}t\'el\'efax, utiliser \index{nofax@\cs{nofax}}\cs{nofax}.\\[2mm]
\index{email@\cs{email}}\label{emaillettre}\cs{email}\marg{texte} sp\'ecifie l'adresse E-Mail devant appara\^{\i}tre sous l'\index{entete@ent\^ete}ent\^ete. Cette commande\footnote{Suite \`a une proposition de Philipe \ {Esperet}} est \index{commandes!facultatives}facultative, et n'est pas remplac\'ee par d\'efaut. Elle n'utilise pas \cs{username}\index{username@\cs{username}} et est ind\'ependante du m\'ecanisme de la ligne d'E-Mail (voir page \pageref{emailline}).\\[2mm]
\vfill\pagebreak

\noindent\fbox{\parbox[t]{\textwidth}{
  \hspace*{90mm}
  \begin{minipage}[t]{\indentedwidth}
    \rule{0pt}{1.4\baselineskip}\TeX\ Users Group\\
    P.O.Box 869\\
    Santa Barbara, CA 93102\\
    USA 
  \end{minipage}\\
  \vspace*{2cm}\\
  Dear Sir,\\*
}}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl L'adresse et les salutations d'une lettre}
\addcontentsline{lof}{figure}{\themesfig.~~~L'adresse et les salutations d'une lettre}
\end{center}

\subsubsection{Du destinataire et du texte}

\noindent Chaque lettre\index{lettre} est \'ecrite dans un \index{environnement}environnement {\tt letter}, dont l'argument contient le nom et l'\index{adresse!destinataire}adresse du \index{destinataire}destinataire, s\'epar\'es par la commande \vers+\\+. L'adresse elle-m\^eme peut \^etre compos\'ee de plusieurs lignes s\'epar\'ees par des \vers+\\+.\\[2mm] 
{\bf Rem: Le premier \vers+\\+ s\'eparant le nom de l'adresse ne peut pas \^etre suivi d'un argument facultatif d'espacement, contrairement aux autres}. Pour obtenir des effets\index{effets particuliers} particuliers\footnote{Par exemple l'utilisation du champ de nom pour une indication telle que RECOMMAND\'E\index{recommande@Recommand\'e} ou URGENT\index{Urgent}.}, il faut intercaler une ligne vide entre la premi\`ere ligne et les suivantes que l'on pourra positionner par l'argument facultatif de cette pseudo-ligne.\\[2mm] 
\index{letter@\cs{begin\{letter\}}}\verb+\begin{letter}{+\meta{destinataire}\verb+\\+[\verb+~\\[-3pt]+]\meta{adresse}[\verb+\\+\meta{suite}\verb+\\+\meta{fin}]\verb+}+ \\[2mm]
C'est entre \cs{begin\{letter\}} et \cs{opening} que se placent la plupart des commandes\index{commandes}.\\[2mm] \index{opening@\cs{opening}}\cs{opening}\marg{salutations} commence la lettre\index{lettre}. Cette commande est \index{commandes!obligatoires}obligatoire, car c'est elle qui formatte le d\'ebut de la lettre\index{lettre}, pla\c{c}ant l'\index{entete@ent\^ete}ent\^ete, le lieu, la \index{date}date, le sujet et les \index{salutations}salutations donn\'ees en param\`etre de la commande. \\[2mm] 
Le texte de la lettre\index{lettre} est ensuite trait\'e en mode paragraphe. Les divers \index{environnement}environnements test\'es et fonctionnant correctement sont \vers+center+, \vers+flushleft+, \vers+flushright+, \vers+verbatim+, \vers+verse+, \vers+quotation+, \vers+quote+, \vers+minipage+, \vers+itemize+, \vers+enumerate+, \vers+description+, \vers+picture+, \vers+equation+, \vers+eqnarray+, \vers+tabbing+, \vers+tabular+ et \vers+array+, ainsi que les commandes\index{commandes} \cs{centering}, \cs{raggedleft} et \cs{raggedright}. Les environnements \vers+figure+ et \vers+table+ ne sont pas d\'efinis dans la classe \vers+lettre+. En cas de probl\`emes, veuillez me le faire savoir.\\[2mm] 
\index{closing@\cs{closing}}\cs{closing}\marg{salutations} termine la lettre\index{message}\index{lettre}. Cette commande est \'egalement \index{commandes!obligatoires}obligatoire, car elle met en forme les \index{salutations}salutations, et la ou les signature\index{signature}(s). \\[2mm] 
Quelques commandes\index{commandes} se placent entre \cs{closing} et \cs{end\{letter\}} qui ferme l'\index{environnement}environnement.
\vfill\pagebreak

\def\auxline{
  {\scriptsize
   V.\raise.4ex\hbox{\tiny /}R\'ef.
    \ifx\@empty \toref
      \hfill
    \else 
      {\small\toref}\hfill
    \fi
   N.\raise.4ex\hbox{\tiny /}R\'ef.
    \ifx\@empty \fromref
      \hfill
    \else 
      {\small\fromref}\hfill
    \fi
    \ifx\@empty \telexnum
    \else 
      T\'ELEX\ \telexnum\hspace{5mm}
    \fi
    \ifx\@empty \ccpnum
    \else 
      C.C.P.\ \ccpnum\hspace{5mm}
    \fi}}
\def\toref{}
\def\fromref{DM/sm}
\def\auxflag{.}
\def\telexnum{\phantom{ +45 419 209 obsg ch}}
\def\ccpnum{\phantom{ 12-1210-9}}

\noindent\framebox[\textwidth]{\auxline}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl La ligne des r\'ef\'erences}
\addcontentsline{lof}{figure}{\themesfig.~~~La ligne des r\'ef\'erences}
\end{center}

\subsubsection{De la ligne des r\'ef\'erences}

\noindent Quatre commandes\index{commandes} \index{commandes!facultatives}facultatives permettent de fabriquer une ligne compl\'ementaire
dans l'\index{entete@ent\^ete}ent\^ete, en petits caract\`eres, comme repr\'esent\'ee ci-dessus. 
Une seule de ces commandes\index{commandes} suffit pour cr\'eer la ligne avec les marques N/R\'ef et V/R\'ef (en fran\c{c}ais).\\[2mm]
{\bf Rem : seuls deux champs T\'ELEX, C.C.P. peuvent \^etre 
pr\'esents simultan\'ement sur la ligne. Le syst\`eme ne tient pas compte
d'une \'eventuelle troisi\`eme commande.}\\[2mm]
\index{Nref@\cs{Nref}}\cs{Nref}\marg{texte} pr\'ecise la r\'ef\'erence de l'\index{expediteur@exp\'editeur}exp\'editeur.
\index{nref@\cs{nref}}\cs{nref}\marg{texte} est une commande synonyme conserv\'ee par souci de compatibilit\'e arri\`ere.\\[2mm]
\index{Vref@\cs{Vref}}\cs{Vref}\marg{texte}  rappelle la r\'ef\'erence du \index{destinataire}destinataire.
\index{vref@\cs{vref}}\cs{vref}\marg{texte}  est une commande synonyme conserv\'ee par souci de compatibilit\'e arri\`ere, mais est incompatible avec le \textit{package} \texttt{varioref}\footnote{Bug mis en \'evidence par Stéphane \fsc{Didailler}}.\\[2mm]
\index{telex@\cs{telex}}\cs{telex}\marg{texte}  indique le num\'ero de t\'elex de l'\index{expediteur@exp\'editeur}exp\'editeur.\\[2mm]
\index{ccp@\cs{ccp}}\cs{ccp}\marg{texte}  indique le num\'ero de compte de ch\`eques postaux de l'exp\'e\-di\-teur.\\[2mm]
D'autres commandes peuvent \^etre pr\'evues pour remplir ces champs par des r\'ef\'erences \index{institut}institutionnelles. (voir page \pageref{ccpobs})

\subsubsection{Des \'etiquettes}

\label{etiquettes}
\noindent La commande \\[2mm]
\cs{makelabels}\oarg{n}\index{makelabels@\cs{makelabels}}\\[2mm]
plac\'ee {\bf avant} \cs{begin\{document\}}\index{document@\cs{begin\{document\}}} permet de demander l'impression d'\'etiquettes\index{etiquette@\'etiquette} d'adresses\index{adresse!etiquette@\'etiquette}, pour les destinataires\index{adresse!destinataire} de toutes les lettres du document.\\[2mm]
Une ou plusieurs page(s) s\'epar\'ee(s) sont d\`es lors formatt\'ees apr\`es les lettres, les adresses\index{adresse!etiquette@\'etiquette} \'etant plac\'ees de mani\`ere \`a remplir des pages A4 de 2 colonnes de 8 \'etiquettes\index{etiquette@\'etiquette} au format de 37 x 105 mm chacune. Le texte de l'\'etiquette mesure 70 mm de largeur et est centr\'e verticalement dans l'\'etiquette, en laissant une marge sup\'erieure et inf\'erieure d'au moins 5 mm.\\[2mm]
L'argument facultatif \meta{n} indique o\`u imprimer la premi\`ere \'etiquette, ce qui permet de r\'eutiliser des feuilles ayant d\'ej\`a servi pour \(\meta{n}-1\) \'etiquettes\footnote{Suite \`a une proposition de Jean-No\"el \fsc{Candau}}.
On se reportera utilement aux exemples en fin de manuel pour l'illustration de ces \'etiquettes.

\subsection{Des t\'el\'efax}\label{partfax}
\markright{\it Partie \thesection: \rm Des t\'el\'efax}

\noindent Pour \'ecrire un t\'el\'efax\index{telefax@t\'el\'efax}, le fichier \index{lettre.cls@{\tt lettre.cls}}\vers+lettre.cls+ a \'et\'e complet\'e de mani\`ere \`a r\'epondre aux besoins d'un message\index{message} transitant sur support \'el\'ectronique, et pouvant \^etre corrompu par des perturbations. Un certain nombre de param\`etres de la transmission sont donc regroup\'es en d\'ebut de message\index{message}, avec l'espoir qu'ils assureront au \index{destinataire}destinataire  que le message\index{message} est complet et bien arriv\'e \`a destination, avant m\^eme de le lire.
\vfill\pagebreak

\def\auxline{
  {\scriptsize
      T\'EL\'EPHONE :\ +41 (22) 776 23 07\hspace{5mm}
    \hfill
      T\'EL\'EFAX :\ +41 (22) 776 36 32\hspace{5mm}
    \hfill
      E-Mail : {\ttfamily megevand@pontets.commusoft.ch }}}

\vspace*{0pt}%
\noindent\fbox{\parbox{\textwidth}{%
\makebox[\textwidth]{%
\begin{minipage}[t]{70mm}
  \centering \trfvtn \rule{0pt}{1.4\baselineskip}Denis M\'egevand\\
                \trten CH-1291 Commugny
\end{minipage}
\hspace{20mm}
\begin{minipage}[t]{\indentedwidth}
\centering \LDCMD T~\'E~L~\'E~F~A~X
\end{minipage}
}\\[4mm]
\auxline\\
\hrule
\vspace{3mm}
\begin{minipage}[t]{12mm}
\`A:\\\mbox{}\\\mbox{}\\De:\\\mbox{}\\\mbox{}
\end{minipage}
\hspace{0pt}
\begin{minipage}[t]{60mm}
Observatoire\index{observatoire@Observatoire} de Gen\`eve\\
Aux personnes concern\'ees\\\mbox{}\\
Dr~D.~M\'egevand\\
Ing\'enieur \TeX nicien\\\mbox{}
\end{minipage}
\begin{minipage}[t]{80mm}
\raggedleft Fax +41-22-755-3983\\\mbox{}\\\mbox{}\\
\raggedleft Nombre de pages: 2\\\mbox{}\\\mbox{}
\end{minipage}
\hrule
\vspace{3mm}
\noindent\parbox{\hsize}{\large\sl\bf{En cas de mauvaise transmission, appelez s.v.p. l'op\'erateur t\'el\'efax.}}
\vspace{1mm}
\hrule

\vspace{2mm}}}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl La partie informative d'un t\'el\'efax}
\addcontentsline{lof}{figure}{\themesfig.~~~La partie informative d'un t\'el\'efax}
\end{center}

\subsubsection{De l'ent\^ete et de la zone en \'evidence}

\noindent Les \index{entete@ent\^ete}ent\^etes d\'ecrites pour les lettres\index{lettre} sont simplifi\'ees, comme repr\'esent\'ees ci-dessus. Le champ d\'efinissant le lieu et la \index{date}date ( voir page \pageref{datecom}) est d\'eplac\'e au dessous d'un champ mis en \'evidence, contenant les informations\index{informations essentielles} essentielles de transmission, et une ligne d'instruction pour le destinataire\index{destinataire} d'un message\index{message!corrompu} corrompu.
L'\index{entete@ent\^ete}ent\^ete et la zone dite \og en \'evidence\fg{} sont pilot\'ees par les commandes\index{commandes} suivantes:\\[2mm]
\index{address@\cs{address}}\cs{address}\marg{adresse}\index{adresse!expediteur@exp\'editeur} pr\'ecise l'adresse de l'\index{expediteur@exp\'editeur}exp\'editeur, utilis\'ee dans l'\index{entete@ent\^ete}ent\^ete du t\'el\'efax\index{telefax@t\'el\'efax} comme ci-dessus. Cette commande est \index{commandes!facultatives}facultative, et est remplac\'ee par d\'efaut par l'\index{entete@ent\^ete}ent\^ete définie dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}\\[2mm]
Chaque t\'el\'efax\index{telefax@t\'el\'efax} est \'ecrit dans un \index{environnement}environnement {\tt telefax}, dont les arguments contiennent le num\'ero de t\'el\'efax\index{telefax@t\'el\'efax} d'une part, le nom et l'\index{adresse!destinataire}adresse du \index{destinataire!adresse}destinataire, d'autre part. \\[2mm] 
\index{telefax@\cs{begin\{telefax\}}}\cs{begin\{telefax\}}\marg{num\'ero}\vers+{+\meta{destinataire}\vers+\\+\meta{adresse}\vers+}+ Le num\'ero t\'el\'efax\index{telefax@t\'el\'efax!numero@num\'ero}\index{numero@num\'ero!telefax@t\'el\'efax} du \index{destinataire}destinataire est plac\'e dans la zone en \'evidence, \`a droite du champ \og \`A:\fg{}, dont le param\`etre est donn\'e par le second argument de la commande.\\[2mm]
\index{location@\cs{location}}\cs{location}\marg{texte} d\'efinit le param\`etre du champ \og De:\fg{} situ\'e dans la zone en \'evidence. S'il n'y est pas, \index{name@\cs{name}}\cs{name} est utilis\'e.\\[2mm] 
A droite du champ \og De:\fg{} se trouve un champ qui indique le nombre de pages total du t\'el\'efax\index{telefax@t\'el\'efax}. Ce champ est calcul\'e automatiquement par \LaTeX, ce qui oblige l'utilisateur \`a compiler son texte {\bf deux fois} avec {\bf \LaTeX}, pour que le nombre indiqu\'e soit correct. Lorsque ce nombre est modifi\'e, \LaTeX\ en avertit\index{message!d'avertissement} l'utilisateur.\\[2mm] 
\index{addpages@\cs{addpages}}\cs{addpages}\marg{n} permet \`a \LaTeX de calculer le nombre de pages correct si l'on a {\it n} pages d'annexes externes \`a joindre au t\'el\'efax\index{telefax@t\'el\'efax}.\\[2mm]
\index{telefaxstring@\cs{telefaxstring}}\cs{telefaxstring} permet de red\'efinir la cha\^{\i}ne {\LDCMD T~\'E~L~\'E~F~A~X} en haut \`a droite de la premi\`ere page. Sa valeur par d\'efaut est \vers+{\CMD T~\'E~L~\'E~F~A~X}+, o\`u \cs{CMD} appelle la police \vers+cmdunh10 scaled\magstep2+ (voir page \pageref{chaines}).\\[5mm]

\noindent\framebox[\textwidth]{\auxline}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl La ligne auxiliaire du t\'el\'efax}
\addcontentsline{lof}{figure}{\themesfig.~~~La ligne auxiliaire du t\'el\'efax}
\end{center}

\subsubsection{De la ligne auxiliaire}

\noindent Quatre commandes\index{commandes} \index{commandes!facultatives}facultatives permettent de modifier la ligne compl\'ementaire dans l'\index{entete@ent\^ete}ent\^ete, en petits caract\`eres, comme repr\'esent\'ee ci-dessus. La ligne est toujours pr\'esente, et par d\'efaut contient les num\'eros définis dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}\\[2mm]
\index{telephone@\cs{telephone}}\cs{telephone}\marg{texte} indique le num\'ero de \index{telephone@t\'el\'ephone}\index{numero@num\'ero!telephone@t\'el\'ephone}t\'el\'ephone de l'\index{expediteur@exp\'editeur}exp\'editeur. Elle est remplac\'ee par d\'efaut.\\[2mm]
\index{fax@\cs{fax}}\cs{fax}\marg{texte} indique le num\'ero de t\'el\'efax\index{telefax@t\'el\'efax!numero@num\'ero}\index{numero@num\'ero!telefax@t\'el\'efax} de l'\index{expediteur@exp\'editeur}exp\'editeur. Elle est remplac\'ee par d\'efaut.\\[2mm]
\index{email@\cs{email}}\label{emailfax}\cs{email}\marg{texte} indique l'adresse E-Mail de l'\index{expediteur@exp\'editeur}exp\'editeur. Elle n'est pas remplac\'ee par d\'efaut. Elle n'utilise pas \cs{username}\index{username@\cs{username}} et est ind\'ependante du m\'ecanisme de la ligne d'E-Mail (voir page \pageref{emailline}).\\[2mm]
\index{telex@\cs{telex}}\cs{telex}\marg{texte}  indique le num\'ero de t\'elex de l'\index{expediteur@exp\'editeur}exp\'editeur. Elle n'est pas remplac\'ee par d\'efaut.\\[2mm]
\vfill\pagebreak

\subsubsection{De la suite du t\'el\'efax}

\noindent\index{lieu@\cs{lieu}}\cs{lieu}\marg{texte} indique le lieu d'envoi, avant la \index{date}date, en haut et \`a droite du corps du t\'el\'efax\index{telefax@t\'el\'efax}. Cette commande est \index{commandes!facultatives}facultative, et est remplac\'ee par d\'efaut par le lieu défini dans le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}. Pour supprimer compl\'etement le lieu, utiliser \index{nolieu@\cs{nolieu}}\cs{nolieu} . \\[2mm]
\index{date@\cs{date}}\label{datecom}\cs{date}\marg{texte} permet de sp\'ecifier une \index{date}date fixe pour le t\'el\'efax\index{telefax@t\'el\'efax}. Utile pour pr\'e-- ou post\index{date}dater un message\index{message}, cette commande est \index{commandes!facultatives}facultative et est remplac\'ee par d\'efaut par la \index{date}date du jour dans la langue\index{langue} courante (voir page \pageref{seclang}). Pour supprimer compl\'etement la \index{date}date, utiliser
\index{nodate@\cs{nodate}}\cs{nodate}.\footnote{L'option \texttt{origdate}  de la classe \texttt{lettre.cls} enclenche un mécanisme permettant de conserver la date d'origine\index{date!d'origine} du t\'el\'efax, même lors d'une compilation ult\'erieure : la date sp\'ecifi\'ee par ces commandes est sauvegardée dans un fichier auxiliaire (\texttt{.odt}), \`a l'int\'erieur d'une macro, si celle-ci n'existe pas (typiquement lors d'une premi\`ere compilation). Lorsque ce fichier existe et qu'il contient la macro, la date enregistrée dans celle-ci est utilisée. Chaque t\'el\'efax crée dans ce fichier une macro qui lui est propre.}\index{origdate@\vers+origdate+}\index{fichier!odt@\verb+.odt+}\\[2mm]
C'est entre \index{telefax@\cs{begin\{telefax\}}}\cs{begin\{telefax\}} et \cs{opening} que se placent la plupart des commandes\index{commandes}.\\[2mm]
\index{opening@\cs{opening}}\cs{opening}\marg{salutations} commence le message\index{message}. Cette commande est \index{commandes!obligatoires}obligatoire, car c'est elle qui formatte le d\'ebut du t\'el\'efax\index{telefax@t\'el\'efax}, pla\c{c}ant l'\index{entete@ent\^ete}ent\^ete, la zone en \'evidence, le lieu, la \index{date}date, le sujet  et les \index{salutations}salutations donn\'ees en param\`etre de la commande. \\[2mm] 
Le texte du message\index{message} est ensuite tap\'e en mode paragraphe. Les divers \index{environnement}environnements test\'es et fonctionnant correctement sont \vers+center+, \vers+flushleft+, \vers+flushright+, \vers+verbatim+, \vers+verse+, \vers+quotation+, \vers+quote+, \vers+minipage+, \vers+itemize+, \vers+enumerate+, \vers+description+, \vers+picture+, \vers+equation+, \vers+eqnarray+, \vers+tabbing+, \vers+tabular+ et \vers+array+, ainsi que les commandes\index{commandes} \cs{centering}, \cs{raggedleft} et \cs{raggedright}. Les environnements \vers+figure+ et \vers+table+ ne sont pas d\'efinis dans la classe \vers+lettre+. En cas de probl\`emes, veuillez me le faire savoir.\\[2mm] 
\index{closing@\cs{closing}}\cs{closing}\marg{salutations} finit le t\'el\'efax\index{telefax@t\'el\'efax}\index{message}. Cette commande est \'egalement \index{commandes!obligatoires}obligatoire, car elle met en forme les \index{salutations}salutations, et la(les) signature\index{signature}(s). \\[2mm] 
Quelques commandes\index{commandes} se placent entre \cs{closing} et 
\index{telefax@\cs{end\{telefax\}}}\cs{end\{telefax\}} qui ferme l'\index{environnement}environnement. \\[2mm]

\subsection{Des commandes communes}\label{partcom}

\markright{\it Partie \thesection: \rm Des commandes communes}
\vfill\pagebreak


\subsubsection{De l'exp\'editeur}

\noindent Les commandes\index{commandes} d\'ecrivant l'\index{expediteur@exp\'editeur}exp\'editeur sont les suivantes: \\[2mm]
\index{name@\cs{name}}\cs{name}\marg{nom} indique le nom de l'\index{expediteur@exp\'editeur}exp\'editeur. Ce param\`etre est \index{commandes!obligatoires}obligatoire. \\[2mm]
\index{signature@\cs{signature}}\cs{signature}\marg{texte} d\'efinit le contenu de la signature\index{signature}. Ce param\`etre est \index{commandes!facultatives}facultatif, et est remplac\'e par d\'efaut par le contenu de \index{name@\cs{name}}\cs{name}. \\[2mm] 
\index{secondsignature@\cs{secondsignature}}\cs{secondsignature}\marg{texte} d\'efinit le contenu de la seconde signature\index{signature}. Ce param\`etre est \index{commandes!facultatives}facultatif, et n'est pas remplac\'e par d\'efaut. \\[2mm] 
\index{thirdsignature@\cs{thirdsignature}}\cs{thirdsignature}\marg{texte} d\'efinit le contenu de la troisi\`eme signature\index{signature}. Ce param\`etre est \index{commandes!facultatives}facultatif, et n'est pas remplac\'e par d\'efaut. \\[2mm] 
Une seule signature est centr\'ee sur la partie droite du message.
Plusieurs signatures sont plac\'ees de gauche \`a droite. Elles se partagent \'equitablement la largeur de la page.\\[2mm]

\def\emailine{%
  {\scriptsize
    E-Mail : \hfill\tt
    \ifx\@empty \ccittnum
    \else
     \hfill \ccittnum\hfill
    \fi
    \ifx\@empty \internetnum
    \else
     \hfill \internetnum\hfill
    \fi
    \ifx\@empty \bitnetnum
    \else
     \hfill \bitnetnum\hfill
    \fi
    \ifx\@empty \psinum
    \else 
     \hfill \psinum\hfill
    \fi
    \ifx\@empty \decnetnum
    \else 
     \hfill \decnetnum\hfill
    \fi}}%
\def\psinum{}
\def\decnetnum{}
\def\bitnetnum{}
\def\ccittnum{S=megevand;OU=obs;O=unige;PRMD=switch;ADMD=arcom;C=ch}
\def\internetnum{megevand@obs.unige.ch}

\subsubsection{De la ligne d'E-Mail}\label{emailline}

\noindent Six commandes\index{commandes} \index{commandes!facultatives}facultatives permettent de fabriquer une ligne d'\index{adresse!electronique@\'electronique}adresses de 
courrier \'electronique, comme repr\'esent\'ee ci-dessous. Cette ligne est
s\'epar\'ee du corps du message\index{message} par un trait horizontal sur toute la largeur.
Une seule de ces commandes\index{commandes} suffit pour cr\'eer la ligne avec la marque 
E-Mail:.\\[2mm]
{\bf Rem : seuls trois parmi les champs ccitt, internet, bitnet, telepac et decnet peuvent \^etre pr\'esents simultan\'ement sur la ligne. Le syst\`eme ne tient compte que des trois premi\`eres commandes.}\\[2mm]
\index{username@\cs{username}}\cs{username}\marg{nom}  indique le \index{nom d'utilisateur}nom d'utilisateur de l'exp\'editeur. Pour composer les adresses \'electroniques, le syst\`eme utilise ce champ, s'il est d\'efini. Dans le cas contraire, il donne un avertissement\index{message!d'avertissement} \`a l'\'ecran, et compose l'adresse sans \index{nom d'utilisateur}nom d'utilisateur.\\[2mm]
\index{bitnet@\cs{bitnet}}\cs{bitnet}\marg{adresse}  indique l'\index{adresse!bitnet}adresse bitnet de l'\index{expediteur@exp\'editeur}exp\'editeur.\\[2mm]
\index{ccitt@\cs{ccitt}}\cs{ccitt}\marg{adresse} indique l'\index{adresse!ccitt}adresse de l'\index{expediteur@exp\'editeur}exp\'editeur, au format X400\index{X400}.\\[2mm]
\index{decnet@\cs{decnet}}\cs{decnet}\marg{adresse}  indique le num\'ero decnet\index{adresse!decnet}\index{numero@num\'ero!decnet} de l'exp\'e\-di\-teur.\\[2mm]
\index{internet@\cs{internet}}\cs{internet}\marg{adresse} indique l'\index{adresse!internet}adresse internet de l'\index{expediteur@exp\'editeur}exp\'editeur, au format RFC~822\index{RFC 822}.\\[2mm]
\index{telepac@\cs{telepac}}\cs{telepac}\marg{adresse}  indique le num\'ero telepac\index{adresse!telepac}\index{numero@num\'ero!telepac} de l'\index{expediteur@exp\'editeur}exp\'editeur.\\[2mm]
D'autres commandes peuvent \^etre d\'efinies pour r\'ef\'erencer des adresses <<E-Mail>> institutionnelles. (voir page \pageref{internetobs})\\[2mm]
{\bf Rem: La commande \index{email@\cs{email}}\cs{email} d\'ecrite aux pages \pageref{emaillettre} et \pageref{emailfax} et la cr\'eation de cette ligne sont ind\'ependantes l'une de l'autre.}

\vspace*{\fill}
\noindent\parbox{\textwidth}{\rule{\textwidth}{.4pt}\\\emailine}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl La ligne d'E-Mail}
\addcontentsline{lof}{figure}{\themesfig.~~~La ligne d'E-Mail}
\end{center}
\pagebreak

\subsubsection{De la langue}
\label{seclang}

\def\fcejour{le \number\day\space\ifcase\month\or
    janvier\or f\'evrier\or mars\or avril\or mai\or juin\or
    juillet\or ao\^ut\or septembre\or octobre\or novembre\or d\'ecembre\fi
    \space \number\year}%
\def\ecejour{\ifcase\month\or
    January\or February\or March\or April\or May\or June\or
    July\or August\or September\or October\or November\or December\fi
    \space\number\day ,\space\number\year}%
\def\acejour{\ifcase\month\or
    January\or February\or March\or April\or May\or June\or
    July\or August\or September\or October\or November\or December\fi
    \space\number\day ,\space\number\year}%
\def\dcejour{den \number\day .\space\ifcase\month\or
  Januar\or Februar\or M\"arz\or April\or Mai\or Juni\or
  Juli\or August\or September\or Oktober\or November\or Dezember\fi
  \space \number\year}%
\noindent Bien qu'ayant \'et\'e d\'evelopp\'e pour un usage francophone, la classe {\tt lettre} permet de r\'ediger des messages en anglais, en allemand, et
en anglais US, appel\'e am\'ericain. L'utilisateur peut modifier la langue par d\'efaut\index{langue!defaut@d\'efaut} (fran\c{c}ais) pour toutes les lettres d'un fichier en appelant \vers+romand+ (variante du fran\c{c}ais), \vers+allemand+, \vers+anglais+ ou \vers+americain+ en option de la classe lettre \index{lettre.cls@{\tt lettre.cls}} :\\[2mm]
\vers+\documentclass[allemand]{lettre}+\\

\noindent Cinq commandes\index{commandes} permettent de red\'efinir individuellement la langue\index{langue} d'un message\index{message} :\\[2mm]
\index{francais@\cs{francais}}\cs{francais},
\index{romand@\cs{romand}}\cs{romand}, variante du fran\c{c}ais,
\index{anglais@\cs{anglais}}\cs{anglais}, \index{americain@\cs{americain}}\cs{americain}, variante de l'anglais et 
\index{allemand@\cs{allemand}}\cs{allemand}.

\noindent Ce m\'ecanisme de commutation de la langue red\'efinit le format de la \index{date}date, des labels fournis par les
commandes\index{commandes} \index{conc@\cs{conc}}\cs{conc}, \index{encl@\cs{encl}}\cs{encl}, \index{mencl@\cs{mencl}}\cs{mencl}, \index{cc@\cs{cc}}\cs{cc} 
(voir page \pageref{seccomsup}), 
des \index{salutations}salutations et de toutes les cha\^\i{}nes fixes (voir page \pageref{chaines}) pouvant appara\^\i{}tre dans les messages. L'appel aux langues allemande, am\'ericaine et anglaise centrent les \index{salutations}salutations sur la moiti\'e droite du message\index{message}, sauf si plusieurs signature\index{signature}s sont sp\'ecifi\'ees.
\begin{center}\scriptsize
  \begin{tabular}[t]{|l||c|c|c|c|c|}
    \hline
        &\cs{francais}&\cs{romand}&\cs{anglais}&\cs{americain}&\cs{allemand}\\
    \hline\hline
\index{date}date	    &\fcejour&\fcejour&\ecejour&\acejour&\dcejour\\
    \hline
salutations&pleine largeur&pleine largeur&moiti\'e droite&moiti\'e droite&moiti\'e droite\\
    \hline
  \end{tabular}
\end{center}
\refstepcounter{mesfig}
\begin{center}
\tablename\themesfig: {\sl Les d\'ependances linguistiques}
\addcontentsline{lof}{figure}{\themesfig.~~~Les d\'ependances linguistiques}
\end{center}
De plus\footnote{Suite \`a des discussions avec Eric \fsc{Picheral} et Bernard \fsc{Gaulle}}, si l'on a charg\'e l'un des paquets multilingue \vers+french+\index{french@\vers+french.sty+} ou \vers+babel+\index{babel@\vers+babel.sty+}, la commutation s\'electionne automatiquement l'appel ad\'equat. Ceci est limit\'e par les paquets et les trois langues d\'efinies, l'am\'ericain \'etant trait\'e comme l'anglais et le romand comme le fran\c{c}ais (\vers+french+ : francais, anglais ; \vers+babel+ : francais, allemand, anglais) :\\[2mm]
\vers+\documentclass{lettre}+\\
\vers+\usepackage{french}+\\
appellera \cs{french}\index{french@\cs{french}}\\[2mm]
\vers+\documentclass[allemand]{lettre}+\\
\vers+\usepackage{babel}+\\
\cs{begin\{letter\}}\\
\ldots\\
\cs{end\{letter\}}\\
\cs{begin\{letter\}}\\
\cs{anglais}\\
\ldots\\
\cs{end\{letter\}}\\
appellera \vers+\selectlanguage{german}+\index{selectlanguage@\cs{selectlanguage}} pour la premi\`ere lettre, et \vers+\selectlanguage{english}+ pour la seconde.
\vspace*{1cm}

\subsubsection{De la mise en page}\label{marge}

\noindent La mise en page de lettres est d\'elicate, car la quantit\'e de mati\`ere reste relativement faible, de l'ordre de quelques pages, difficilement capable d'absorber la mati\`ere d'une derni\`ere page trop courte.\\[2mm] 

%\index{@\vers+\+}
\noindent La classe {\tt lettre} dispose\footnote{Suite \`a une proposition d'Yves \fsc{Soulet} au congr\`es GUTenberg'95 de Montpellier} d'un m\'ecanisme permettant de r\'egler la tension\index{tension} de la lettre, c'est-\`a-dire de modifier les blancs \'elastiques\index{blanc elastique@blanc \'elastique} entre les diff\'erents \'el\'ements de la lettre, de mani\`ere \`a \'eviter d'avoir une derni\`ere page avec tr\`es peu de mati\`ere. Ce m\'ecanisme est actionn\'e automatiquement par d\'efaut : \\[2mm]
Il calcule la longueur de la derni\`ere page de chaque lettre du fichier, et en fonction de divers seuils, r\'egl\'es dans la classe \`a 50, 100, 150, 200 et 250 pt correspondant environ \`a 1/15, 1/7, 1/5, 1/4 et 1/3 d'une page A4, calcule un coefficient de tension \`a appliquer \`a une nouvelle compilation. Ce coefficient est plac\'e dans un fichier auxiliaire (\vers+.tns+)\index{fichier!tns@\verb+.tns+} \vers+\jobname.tns+, et utilis\'e lors d'un prochain passage. Un message d'avertissement\index{message!d'avertissement} est donn\'e \`a l'\'ecran, lorsque la derni\`ere page est consid\'er\'ee comme \'etant trop courte (plus courte qu'un tiers de page), conseillant \`a l'utilisateur de recompiler son fichier. Lors de cette nouvelle compilation, la classe tente \`a l'aide de ce coefficient de comprimer la (les) page(s) pr\'ec\'edente(s) pour y ins\'erer la mati\`ere de cette derni\`ere page, ou de l'\'etirer pour obtenir une derni\`ere page de longueur correcte.\\[2mm]
Le m\'ecanisme peut \^etre d\'eclench\'e par l'utilisateur lorsqu'il ne r\'eagit pas correctement, en imposant la valeur de la tension par la commande \cs{tension}\marg{valeur}\index{tension@\cs{tension}}. La valeur normale est de 2, une valeur plus grande rel\^ache le texte, une valeur plus petite, m\^eme n\'egative le resserre. Des valeurs entre -6 et 6 donnent des r\'esultats satisfaisants.\\[2mm]

\noindent La commande \index{marge@\cs{marge}}\cs{marge}\marg{dimension} permet de g\'erer la largeur de la marge\index{mise en page}\index{marge} de gauche du message\index{message}. Elle est par d\'efaut de 15 millim\`etres par rapport \`a la marge \og normale\fg{} de \TeX\ (1 pouce), soit de 40 millim\`etres par rapport au bord gauche du papier.\\[3mm]

\subsubsection{De la ligne de bas de page}\label{bdp}

\noindent Une commande\index{commandes} \index{commandes!facultatives}facultative permet de fabriquer une ligne personnalis\'ee en bas de page\footnote{Suite \`a une proposition d'Eric \fsc{Picheral}}\index{bas de page}. Cette ligne est
s\'epar\'ee du corps du message\index{message} par un trait horizontal sur toute la largeur.\\[2mm]
\index{basdepage@\cs{basdepage}}\cs{basdepage}\marg{contenu}  demande la cr\'eation de cette ligne et en indique le contenu\\[2mm]
{\bf Rem: Cette ligne n'est cr\'e\'ee que si aucune des commandes n\'ecessaires pour cr\'eer la ligne d'E-Mail n'est pr\'esente.}

\vspace*{\fill}
\noindent\parbox{\textwidth}{\rule{\textwidth}{.4pt}\\\small\hfill 1F, ch des Pontets\hfill Pas de publicit\'e, merci.\hfill T\'el : 776.23.07\hfill}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl La ligne de bas de page}
\addcontentsline{lof}{figure}{\themesfig.~~~La ligne de bas de page}
\end{center}
\vfill\pagebreak


\subsubsection{Des commandes suppl\'ementaires\label{seccomsup}}

\noindent Cinq commandes\index{commandes} \index{commandes!facultatives}facultatives permettent de compl\'eter le message\index{message}. Les labels cr\'e\'es par ces commandes peuvent \^etre modifi\'es par l'utilisateur (voir page \pageref{chaines}).\\[2mm]
\index{conc@\cs{conc}}\cs{conc}\marg{sujet} pr\'ecise le sujet du message\index{message}.\\[2mm]
\index{ps@\cs{ps}}\vers+\ps{+{\it label}\vers+}{+{\it texte}\vers+}+ permet d'inclure un texte apr\`es la signature\index{signature}, sous la forme d'un paragraphe labell\'e. Le label doit \^etre sp\'ecifi\'e par l'utilisateur (voir les postscriptums des exemples.).\\[2mm] 
\index{encl@\cs{encl}}\cs{encl}\marg{annexes} sp\'ecifie les annexes.\\[2mm] 
\index{mencl@\cs{mencl}}\cs{mencl} pr\'ecise que les annexes sont mentionn\'ees dans le document.\\[2mm] 
\index{cc@\cs{cc}}\cs{cc}\marg{destinataires} liste les \index{destinataire}destinataires de copies.\\[2mm] 
\vspace*{1cm}\\

\subsubsection{Des pages suivantes}

\noindent A part la premi\`ere page, qui est automatiquement formatt\'ee avec l'\index{entete@ent\^ete}ent\^ete, la \index{date}date, l'\index{adresse!destinataire}adresse du \index{destinataire}destinataire, et non num\'erot\'ee, on peut choisir entre plusieurs styles de pages:\\[2mm]
\index{pagestyle@\cs{pagestyle}}\cs{pagestyle}\marg{format} permet de choisir le format.\\[2mm]
Les divers formats sont: (voir pages  \pageref{partex} et suivantes)\\[2mm]
\vers+empty+: les pages ne contiennent ni \index{entete@ent\^ete}ent\^ete, ni embase.\\[2mm]
\vers+headings+: les \index{entete@ent\^ete}ent\^etes contiennent le lieu, la \index{date}date et le num\'ero de la page. Il n'y a pas d'embases. Ce format n'influence que les pages impaires en mode recto-verso, sp\'ecifi\'e par l'option \vers+[twoside]+ de la classe lettre\index{lettre.cls@{\tt lettre.cls}}.\\[2mm]
\vers+plain+: Il n'y a pas d'\index{entete@ent\^ete}ent\^etes, les embases contiennent les num\'eros de page centr\'es. 

\subsection{De l'Observatoire}\label{partobs}

\markright{\it Partie \thesection: \rm De l'Observatoire}
\noindent Cette partie d\'ecrit les commandes\index{commandes} sp\'ecifiques \`a
l'\index{observatoire@Observatoire}Observatoire de \index{Geneve@Gen\`eve}Gen\`eve. Sa structure est similaire
à la séquences des sections \S~\ref{partlettre}, \S~\ref{partfax} et \S~\ref{partcom} déjà développées dans ce
document. La premi\`ere section d\'ecrit les \index{entete@ent\^ete}ent\^etes des \index{lettre}lettres, la seconde celles des t\'el\'efax\index{telefax@t\'el\'efax}, et la derni\`ere d\'ecrit les diff\'erentes commandes permettant de donner des r\'ef\'erences \`a l'Observatoire en cours de document.

Il faut noter que ces commandes sont définies dans le fichier d'institut de l'Observatoire, et ne remplacent plus par défaut les champs des messages depuis la version 2.32. Ces champs sont remplacés par les commandes du fichier \vers+default.ins+\index{default.ins@\vers+default.ins+}, qui peut être redéfini dans chaque institut, comme décrit aux pages \pageref{partinst} et suivantes. 
\vfill\pagebreak

\subsubsection{De l'ent\^ete et de la date des lettres}

\noindent\index{addressobs@\cs{addressobs}}\label{addressobs}\cs{addressobs}\index{lettre} \index{adresse!observatoire@Observatoire} donne l'adresse de l'\index{observatoire@Observatoire}Observatoire comme \index{entete@ent\^ete}ent\^ete de la lettre\index{lettre}. Elle donne une ent\^ete comme ci-dessous. \\[2mm] 
\noindent
\framebox[\textwidth]{%
\begin{minipage}[t]{70mm}
  \centering \LDCMD \rule{0pt}{1.4\baselineskip}OBSERVATOIRE DE 
                  GEN\`EVE\rule{0pt}{1.4\baselineskip}\\[2mm]
             %\ldcmd 51, chemin des Maillettes\\
             \ldcmd CH-1290 Sauverny\\
                  Suisse\\[2mm]
                  T\'el: +41(22) 755 26 11\\
                  Fax: +41(22) 755 39 83
\end{minipage}
\hspace{20mm}
\begin{minipage}[t]{\indentedwidth}
   Sauverny, le \today
\end{minipage}
}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl L'ent\^ete de l'Observatoire}
\addcontentsline{lof}{figure}{\themesfig.~~~L'ent\^ete de l'Observatoire}
\end{center}

\vspace{3mm}
\noindent\index{lieuobs@\cs{lieuobs}}\label{lieuobs}\cs{lieuobs} indique Sauverny comme lieu d'envoi, avant la \index{date}date, en haut et \`a droite de la lettre\index{lettre}.\\[2mm]
\index{telephoneobs@\cs{telephoneobs}}\label{telephoneobs}\cs{telephoneobs} place sous l'ent\^ete le num\'ero de \index{telephone@t\'el\'ephone}\index{numero@num\'ero!telephone@t\'el\'ephone!observatoire@Observatoire}t\'el\'ephone de l'\index{observatoire@Observatoire}Observatoire (+41 (22) 755 26 11).\\[2mm] 
\index{faxobs@\cs{faxobs}}\label{faxobs}\cs{faxobs} place sous l'ent\^ete le num\'ero de \index{numero@num\'ero!telefax@t\'el\'efax!observatoire@Observatoire}t\'el\'efax de l'\index{observatoire@Observatoire}Observatoire (+41 (22) 755 39 83).\\[2mm] 
\noindent\index{psobs@\cs{psobs}}\label{psobs}\cs{psobs} Cette commande cr\'ee l'\index{entete@ent\^ete}ent\^ete officielle de l'\index{observatoire@Observatoire}Observatoire, comme ci-dessous. Cette commande est \index{commandes!facultatives}facultative, et ne peut \^etre utilis\'ee avec succ\`es que si vous utilisez une imprimante {\trten P\treit OST\trten S\treit CRIPT}\index{postscript@{\sc PostScript}}. Elle importe un fichier ex\'ecutant le dessin de l'\'ecusson \index{ecusson@\'ecusson genevois}genevois. Ce fichier s'appelle \vers+ecusson55.ps+ et doit \^etre pr\'esent dans le r\'epertoire des macros\index{macros!repertoire@r\'epertoire}.\\[2mm]
\noindent\framebox[\textwidth]{
\begin{minipage}[t]{75mm}
  \centering 
  \treit R\'EPUBLIQUE\\[-1mm]
  \treit ET CANTON DE GEN\`EVE\\[-1mm]
  \epsfbox[0 0 55 55]{ecusson55.ps}
  \mbox{\hss\trfvtn OBSERVATOIRE DE GEN\`EVE\hss}\\[2mm]
  %\trten Ch. des Maillettes 51\\
  \trten CH-1290 SAUVERNY\\
  \trten Suisse\\[2mm]
  \trten T\'el: +41(22) 755 26 11\\
  \trten Fax: +41(22) 755 39 83
\end{minipage}
\hspace{15mm}
\begin{minipage}[t]{\indentedwidth}
  \centering
  \mbox{}\\[10mm]
  Sauverny, le \today
\end{minipage}
}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl Lettres officielles de l'Observatoire}
\addcontentsline{lof}{figure}{\themesfig.~~~Lettres officielles de l'Observatoire}
\end{center}
\vfill\pagebreak

\subsubsection{De l'ent\^ete des t\'el\'efax}

\noindent\index{addressobs@\cs{addressobs}}\label{addressobsfax}\cs{addressobs} \index{adresse!observatoire@Observatoire}donne l'adresse de l'\index{observatoire@Observatoire}Observatoire comme \index{entete@ent\^ete}ent\^ete du t\'el\'efax\index{telefax@t\'el\'efax} (voir ci-dessous)\\[2mm] 
\noindent
\framebox[\textwidth]{
\begin{minipage}[t]{70mm}
  \centering 
  \LDCMD \rule[6pt]{0pt}{1.0\baselineskip}OBSERVATOIRE DE GEN\`EVE\rule[6pt]{0pt}{1.0\baselineskip}\\[3mm]
  \ldcmd CH-1290 Sauverny\\%
\end{minipage}
\hspace{15mm}
\begin{minipage}[t]{\indentedwidth}
\centering \LDCMD T\'EL\'EFAX
\end{minipage}
}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl L'ent\^ete des t\'el\'efax de l'Observatoire}
\addcontentsline{lof}{figure}{\themesfig.~~~L'ent\^ete des t\'el\'efax de l'Observatoire}
\end{center}

\vspace*{3mm}%
\noindent\index{psobs@\cs{psobs}}\label{psobsfax}\cs{psobs} cr\'ee l'\index{entete@ent\^ete}ent\^ete du t\'el\'efax\index{telefax@t\'el\'efax} comme celle du papier officiel de l'\index{observatoire@Observatoire}Observatoire. (voir ci-dessous) Cette commande est \index{commandes!facultatives}facultative, et ne peut \^etre utilis\'ee avec succ\`es que si vous utilisez une imprimante {\trten P\treit OST\trten S\treit CRIPT}\index{postscript@{\sc PostScript}}. Elle importe un fichier ex\'ecutant le dessin de l'\'ecusson \index{ecusson@\'ecusson genevois}genevois. (voir page \pageref{psobs})\\[2mm]
\noindent
\framebox[\textwidth]{
\begin{minipage}[t]{75mm}
  \centering 
  \epsfysize=2.5cm
  \epsfbox[0 -5 55 60]{ecusson55.ps}
  \mbox{\hss\trfvtn OBSERVATOIRE DE GEN\`EVE\hss}\\[2mm]
  \trten CH-1290 SAUVERNY\\
\end{minipage}
\hspace{15mm}
\begin{minipage}[t]{\indentedwidth}
\centering \LDCMD T\'EL\'EFAX
\end{minipage}
}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl Les t\'el\'efax officiels de l'Observatoire}
\addcontentsline{lof}{figure}{\themesfig.~~~Les t\'el\'efax officiels de l'Observatoire}
\end{center}

\vspace*{3mm}%
\noindent\index{detailledaddress@\cs{detailledaddress}}\label{detailadr}\cs{detailledaddress} 
Cette commande permet de cr\'eer une \index{entete@ent\^ete}ent\^ete institutionnelle\index{institut} de t\'el\'efax\index{telefax@t\'el\'efax} plus d\'etaill\'ee (voir page \pageref{detailtest}), notamment celle de l'Observatoire, dans les deux modes (voir ci-dessous).\\[2mm]
\noindent
\framebox[\textwidth]{
\begin{minipage}[t]{70mm}
  \centering 
  \LDCMD \rule[6pt]{0pt}{1.0\baselineskip}OBSERVATOIRE DE GEN\`EVE\rule[6pt]{0pt}{1.0\baselineskip}\\[3mm]
  %\ldcmd 51, chemin des Maillettes\\%
  \ldcmd CH-1290 Sauverny\\%
       Suisse%
\end{minipage}
\hspace{15mm}
\begin{minipage}[t]{\indentedwidth}
\centering \LDCMD T\'EL\'EFAX
\end{minipage}
}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl L'ent\^ete de t\'el\'efax d\'etaill\'ee de l'Observatoire}
\addcontentsline{lof}{figure}{\themesfig.~~~L'ent\^ete de t\'el\'efax d\'etaill\'ee de l'Observatoire}
\end{center}

\vspace*{3mm}%
\noindent
\framebox[\textwidth]{
\begin{minipage}[t]{75mm}
  \centering 
  \epsfysize=2.5cm
  \epsfbox[0 -5 55 60]{ecusson55.ps}
  \mbox{\hss\trfvtn OBSERVATOIRE DE GEN\`EVE\hss}\\[2mm]
  %\trten Ch. des Maillettes 51\\%
  \trten CH-1290 SAUVERNY\\%
  \trten Suisse%
\end{minipage}
\hspace{15mm}
\begin{minipage}[t]{\indentedwidth}
\centering \LDCMD T\'EL\'EFAX
\end{minipage}
}
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl Les t\'el\'efax officiels de l'Observatoire avec ent\^ete d\'etaill\'ee}
\addcontentsline{lof}{figure}{\themesfig.~~~Les t\'el\'efax officiels de l'Observatoire avec ent\^ete d\'etaill\'ee}
\end{center}

\subsubsection{Des r\'ef\'erences}


\noindent Plusieurs commandes ont \'et\'e pr\'ed\'efinies pour r\'ef\'erencer les num\'eros ou adresses de l'Observatoire. Elles donnent lieu \`a la composition du num\'ero ou de l'adresse dans les champs ad\'equats, tels qu'ils sont d\'efinis dans les parties \ref{partlettre}, \ref{partfax} et \ref{partcom}.\\[3mm]
\index{faxobs@\cs{faxobs}}\label{faxfaxobs}\cs{faxobs}  indique le num\'ero de telefax\index{telefax@t\'el\'efax!numero@num\'ero!observatoire@Observatoire}\index{numero@num\'ero!telefax@t\'el\'efax!observatoire@Observatoire} de l'\index{observatoire@Observatoire!numero@num\'ero!telefax@t\'el\'efax}Observatoire. (+41 (22) 755 39 83)\\[2mm]
\index{ccpobs@\cs{ccpobs}}\label{ccpobs}\cs{ccpobs}  indique le num\'ero de CCP\index{ccp!numero@num\'ero!observatoire@Observatoire}\index{numero@num\'ero!ccp!observatoire@Observatoire} de l'\index{observatoire@Observatoire!numero@num\'ero!ccp}Observatoire. (12-2130-4)\\[2mm]
\index{ccittobs@\cs{ccittobs}}\cs{ccittobs}  indique l'\index{adresse!ccitt!observatoire@Observatoire}\index{observatoire@Observatoire!adresse!ccitt}adresse de mail de l'\index{observatoire@Observatoire}Observatoire, au format X400\index{X400}, et y rajoute le \index{nom d'utilisateur}nom d'utilisateur de l'exp\'editeur, s'il est d\'efini. {\tt (OU=obs;O=unige;PRMD=switch;ADMD=arcom;C=ch)}\\[2mm]
\index{internetobs@\cs{internetobs}}\cs{internetobs}\label{internetobs}  indique l'\index{adresse!internet!observatoire@Observatoire}\index{observatoire@Observatoire!adresse!internet}adresse des SUN de l'\index{observatoire@Observatoire}Observatoire, au format RFC~822\index{RFC 822}, et y rajoute le \index{nom d'utilisateur}nom d'utilisateur de l'exp\'editeur, s'il est d\'efini. {\tt (obs.unige.ch)}\\[2mm]
\index{ftpobs@\cs{ftpobs}}\cs{ftpobs}\label{ftpobs} imprime l'\index{adresse!ftp!observatoire@Observatoire}\index{observatoire@Observatoire!adresse!ftp}adresse du serveur ftp anonyme de l'\index{observatoire@Observatoire}Observatoire (\vers+obsftp.unige.ch+), ainsi que son num\'ero internet. Elle est con\c{c}ue pour \^etre utilis\'ee quelquepart dans le texte de la lettre, ou des commandes suppl\'ementaires (page \pageref{seccomsup}).\\[2mm]
\index{wwwobs@\cs{wwwobs}}\cs{wwwobs}\label{wwwobs} imprime l'\index{adresse!http!observatoire@Observatoire}\index{observatoire@Observatoire!adresse!http}adresse du serveur WWW  de l'\index{observatoire@Observatoire}Observatoire (\vers+obswww.unige.ch+), ainsi que son num\'ero internet. Elle est con\c{c}ue pour \^etre utilis\'ee quelquepart dans le texte de la lettre, ou des commandes suppl\'ementaires (page \pageref{seccomsup}).\\[2mm]


\subsection{Des autres instituts}\label{partinst}
\markright{\it Partie \thesection: \rm Des autres instituts}
\noindent Cette partie d\'ecrit la mani\`ere de modifier le comportement par d\'efaut de la classe lettre\index{lettre.cls@{\tt lettre.cls}} pour l'adapter \`a un autre institut, soci\'et\'e, association, etc.
\vfill\pagebreak

\vspace*{-10mm}
\fbox{\parbox[b]{50mm}{%
\centering
\epsfxsize=25mm%
\mbox{\epsfbox{amgmono.eps}}\\%
{\hvten \'Ecole de ski\\%
	Denis M\'egevand\\Pr\'esident\\%
	T\'el :~+41 (22) 776 23 07}}%
\hspace{35mm}%
\parbox[b]{70mm}{{\em ~~~~Destinataire\\\mbox{}~~~~Adresse}\\[2cm]Commugny, le \today}}%
\refstepcounter{mesfig}
\begin{center}
\figurename\themesfig: {\sl L'ent\^ete des Amis Montagnards}
\addcontentsline{lof}{figure}{\themesfig.~~~L'ent\^ete des Amis Montagnards}
\end{center}

\subsubsection{Du fonctionnement de la classe}

\noindent Il est important de comprendre comment fonctionne la classe\index{lettre.cls@{\tt lettre.cls}} pour pouvoir l'adapter. L'entr\'ee dans les environnements {\tt letter}\index{letter@\cs{begin\{letter\}}} et {\tt telefax}\index{telefax@\cs{begin\{telefax\}}} r\'einitialise toute une s\'erie de param\`etres: la langue\index{langue} est remise \`a la valeur par d\'efaut (voir page \pageref{seclang}), le nombre de pages d'un t\'el\'efax\index{telefax@t\'el\'efax} est remis \`a 0, le style de page est {\tt plain}, les lignes auxiliaires et d'E-Mail, ainsi que tous leurs champs sont vid\'es, les champs d\'efinis par les commandes \cs{location}, \cs{conc} et les signatures sont vid\'es. Ensuite la classe charge le fichier \vers+default.ins+\index{default.ins@\vers+default.ins+} et \'eventuellement un fichier de commandes d'institut. Le nom de ce fichier est donn\'e par le param\`etre de la commande suivante, qui se place entre \cs{begin\{document\}} et \cs{begin\{letter\}} ou \cs{begin\{telefax\}}:\\[2mm]
\vers+\institut{+{\em fichier}\vers+}+\index{institut@\cs{institut}}\label{institut}\\[2mm]
L'extension de ce fichier est \vers+.ins+, et il doit \^etre dans le
chemin de recherche des macros\index{macros!repertoire@r\'epertoire}
(r\'epertoire courant et \vers+$TEXINPUTS+).%$

\subsubsection{Du comportement personnalisé}

\noindent C'est donc cette commande plac\'ee avant \cs{begin\{letter\}}\index{letter@\cs{begin\{letter\}}} ou \cs{begin\{telefax\}}\index{telefax@\cs{begin\{telefax\}}} qui permet de personnaliser les commandes \`a utiliser dans les messages: Toutes les commandes situ\'ees \`a l'int\'erieur de {\em fichier}{\tt.ins} seront ex\'ecut\'ees automatiquement. Par exemple, le fichier \vers+amg.ins+\index{amg@\vers+amg.ins+} suivant permet d'\'ecrire des lettres ayant l'entête de mon club de ski\index{amis@Amis Montagnards Gen\`eve}, comme le montre l'ent\^ete ci-dessus, en incluant simplement la commande \vers+\institut{amg}+\index{institut@\cs{institut}} avant \cs{begin\{letter\}}\index{letter@\cs{begin\{letter\}}}\\[2mm]
\verbatiminput{amg.ins}

\noindent Ces champs peuvent \^etre red\'efinis dans chaque lettre entre le d\'ebut de l'environnement et la commande \cs{opening}.

\subsubsection{Des commandes obligatoires}

\noindent Si l'on veut modifier  l'environnement par d\'efaut, il faut {\bf obligatoirement} que  les commandes suivantes\label{instinum} soient d\'efinies dans le fichier d'institut:
\begin{itemize}
\item \cs{address}
\item \cs{telephone} ou \cs{notelephone}
\item \cs{fax} ou \cs{nofax}
\item \cs{lieu} ou \cs{nolieu}
\end{itemize}

Mais si l'on d\'esire avoir le num\'ero de t\'el\'efax\index{telefax@t\'el\'efax} de l'institut inclus automatiquement dans ses t\'el\'efax, mais facultativement dans ses lettres, il faut l'appeler conditionnellement \`a l'aide du test d\'ecrit au paragraphe suivant\\[2mm]

\begin{versatim}
\makeatletter
\newcommand{\faxinst}{\fax{+41 (22) 776 36 32}}
\if@letter
    \nofax
\else
    \faxinst
\fi
\makeatother
\end{versatim}

\subsubsection{Des variations de la personnalisation}

\noindent Deux \cs{if} permettent de g\'erer plus en d\'etail ces modifications des d\'efauts:\\[2mm]
\cs{if@detail}\label{detailtest}\index{ifdetail@\cs{if"@detail}} permet de d\'efinir une adresse \`a deux niveaux de d\'etails pour les t\'el\'efax\index{telefax@t\'el\'efax}. Ce test est vrai lorsque l'on invoque la commande
\index{detailledaddress@\cs{detailledaddress}}\cs{detailledaddress} (voir page \pageref{detailadr}).\\[2mm]
\cs{if@letter}\index{ifletter@\vers+\if"@letter+} permet de g\'erer diff\'eremment l'ent\^ete d'une lettre\index{lettre} et celle d'un t\'el\'efax\index{telefax@t\'el\'efax}.\\[2mm] 
Le d\'etail de la commande \cs{psobs}\index{psobs@\cs{psobs}} est donn\'e ici \`a titre d'exemple d'utilisation des ces tests:\\[2mm]
\begin{versatim}
\long\def\psobs{%
    \address{%
        \centering
        \vskip -5mm%
        \if@letter
            \treit R\'EPUBLIQUE\\[-1mm]%
            \treit ET CANTON DE GEN\`EVE\\[-1mm]%
        \fi
        \epsfysize=2.5cm
        \epsfbox[-72 -7 55 65]{ecusson55.ps}%
        \mbox{\hss\trfvtn OBSERVATOIRE DE GEN\`EVE\hss}\\[2mm]%
        \trten CH-1290 SAUVERNY\\%
        \if@letter
            \trten Suisse%
        \fi
        \if@detail
            \trten Suisse%
        \fi}}%
\end{versatim}

\subsection{Des autres adaptations}\label{partadapt}
\markright{\it Partie \thesection: \rm Des autres adaptations}
\noindent La partie suivante\index{adaptations} explique la mani\`ere de modifier les champs fixes\index{champs fixes} et la mise en page\index{mise en page} des lettres\index{lettre} et des t\'el\'efax\index{telefax@t\'el\'efax}.
\vfill\pagebreak

\subsubsection{Des cha\^\i{}nes fixes}\label{chaines}
\noindent Un certain nombre de cha\^\i{}nes\index{champs fixes}\index{chaines fixes@cha\^\i{}nes fixes} fixes sont utilis\'ees \`a divers endroits des lettres\index{lettre} et des t\'el\'efax\index{telefax@t\'el\'efax}. Elles d\'ependent de la langue utilis\'ee et sont d\'efinies dans des macros :\\[2mm] 
\index{tellabelname@\cs{tellabelname}}\index{telefaxname@\cs{telefaxname}}\index{telefaxlabelname@\cs{telefaxlabelname}}\index{telephonelabelname@\cs{telephonelabelname}}\index{telefaxstring@\cs{telefaxstring}}\index{faxwarning@\cs{faxwarning}}\index{faxlabelname@\cs{faxlabelname}}\index{telexlabelname@\cs{telexlabelname}}\index{headtoname@\cs{headtoname}}\index{headfromname@\cs{headfromname}}\index{pagetotalname@\cs{pagetotalname}}\index{concname@\cs{concname}}\index{ccname@\cs{ccname}}\index{enclname@\cs{enclname}}\index{mentionname@\cs{mentionname}}\index{vrefname@\cs{vrefname}}\index{nrefname@\cs{nrefname}}%
\begin{tabularx}{\textwidth}{|>{\columncolor[gray]{0.85}}X|>{\columncolor[gray]{0.95}}X|X|X|}
\hline
\bf Macro&\bf Contexte&\bf Fran\c{c}ais&\bf Romand\\
\hline
\hline
\cs{faxwarning}&Zone en \'evidence&\footnotesize En cas de mauvaise transmission, appelez s.v.p. l'op\'erateur t\'el\'efax.&\footnotesize En cas de mauvaise transmission, appelez s.v.p. l'op\'erateur t\'el\'efax.\\
\cs{telefaxstring}&Ent\^ete des t\'el\'efax&\LDCMD\vrule width0pt height20pt depth0pt T~\'E~L~\'E~F~A~X&\LDCMD\vrule width0pt height20pt depth0pt T~\'E~L~\'E~F~A~X\\
\cs{telephonelabelname}&Ligne auxiliaire&T\'EL\'EPHONE :&T\'EL\'EPHONE :\\
\cs{telefaxlabelname}&Ligne auxiliaire&T\'EL\'EFAX :&T\'EL\'EFAX :\\
\cs{telefaxname}&Zone en \'evidence&T\'el\'efax :&T\'el\'efax :\\
\cs{tellabelname}&Ent\^ete&T\'el.&T\'el.\\
\cs{faxlabelname}&Ent\^ete&Fax :&Fax :\\
\cs{telexlabelname}&Ligne auxiliaire&T\'ELEX :&T\'ELEX :\\
\cs{headtoname}&Zone en \'evidence&\`A :&\`A :\\
\cs{headfromname}&Zone en \'evidence&De :&De :\\
\cs{pagetotalname}&Zone en \'evidence&Nombre de pages :&Nombre de pages :\\
\cs{concname}&D\'ebut de message&Objet :&Concerne :\\
\cs{ccname}&Fin des lettres&C.c.&C.c.\\
\cs{enclname}&Fin des lettres&P.j.&Ann.\\
\cs{mentionname}&Fin des lettres&Annexe(s) mentionn\'ee(s)&Annexe(s) mentionn\'ee(s)\\
\cs{vrefname}&Ligne auxiliaire&V.\raise.4ex\hbox{\tiny /}r\'ef.&V.\raise.4ex\hbox{\tiny /}r\'ef.\\
\cs{nrefname}&Ligne auxiliaire&N.\raise.4ex\hbox{\tiny /}r\'ef.&N.\raise.4ex\hbox{\tiny /}r\'ef.\\
\hline
\end{tabularx}\\[1mm]
%
\begin{tabularx}{\textwidth}{|>{\columncolor[gray]{0.85}}X|X|X|X|}
\hline
\bf Macro&\bf Anglais&\bf Am\'ericain&\bf Allemand\\
\hline
\hline
\cs{faxwarning}&\footnotesize If improperly transmitted, please call the telefax operator.&\footnotesize If improperly transmitted, please call the telefax operator.&\footnotesize Bitte unrichtige \"Ubertragungen dem Sender telefonisch melden.\\
\cs{telefaxstring}&\LDCMD T~E~L~E~F~A~X&\LDCMD T~E~L~E~F~A~X&\LDCMD T~E~L~E~F~A~X\\
\cs{telephonelabelname}&TELEPHONE:&PHONE:&TELEFON:\\
\cs{telefaxlabelname}&TELEFAX:&TELEFAX:&TELEFAX:\\
\cs{telefaxname}&Telefax:&Telefax:&Telefax:\\
\cs{tellabelname}&Tel:&Phn:&Tel:\\
\cs{telexlabelname}&TELEX:&TELEX:&TELEX:\\
\cs{headtoname}&To:&To:&An:\\
\cs{headfromname}&From:&From:&Von:\\
\cs{pagetotalname}&Total pages:&Total pages:&Gesamtanzahl der Bl\"atter:\\
\cs{concname}&Subject:&Re:&Betrifft:\\
\cs{ccname}&Cc:&Cc:&Kopie an:\\
\cs{enclname}&Encl(s):&Encl(s):&Beilage(n):\\
\cs{mentionname}&Encl(s).&Encl(s).&Beilage(n) erw\"ahnt\\
\cs{vrefname}&Y.\raise.4ex\hbox{\tiny /}ref.~&Y.\raise.4ex\hbox{\tiny /}ref.~&Ihr Zeichen\\
\cs{nrefname}&O.\raise.4ex\hbox{\tiny /}ref.~&O.\raise.4ex\hbox{\tiny /}ref.~&Unser Zeichen\\
\hline
\end{tabularx}\nobreak
\refstepcounter{mesfig}
\begin{center}
\tablename\themesfig: {\sl Les cha\^\i{}nes fixes}
\addcontentsline{lof}{figure}{\themesfig.~~~Les cha\^\i{}nes fixes}
\end{center}
\vspace*{2mm}

%\index{@\vers+\+}
\noindent Ces d\'efinitions d\'ependantes de la langue sont regroup\'ees vers la fin du fichier de classe, dans les macros \cs{francais}\index{francais@\cs{francais}}, \cs{romand}\index{romand@\cs{romand}}, \cs{anglais}\index{anglais@\cs{anglais}}, \cs{americain}\index{americain@\cs{americain}} et \cs{allemand}\footnote{Merci \`a Gerhard \fsc{Bosch} pour ses corrections des valeurs allemandes}\index{allemand@\cs{allemand}}, ce qui permet \`a l'utilisateur de les red\'efinir facilement. L'ajout d'une nouvelle langue n'est pas plus compliqu\'e, puisqu'il suffit de d\'efinir une commande au nom de cette langue, qui d\'efinit ces diff\'erentes macros, et un flag \cs{sigflag}\index{sigflag@\cs{sigflag}} pour la langue. Ce flag est mis \`a 0 si les salutations finales sont format\'ees sur la largeur de la page, \`a 1 s'il faut n'utiliser que la moiti\'e droite de la page en cas de signature unique (voir page \pageref{seclang}).


\subsubsection{De la mise en page}

\noindent La mise en page\index{mise en page} des lettres\index{lettre} et des t\'el\'efax\index{telefax@t\'el\'efax} utilise les variables dimensionnelles classiques de \LaTeX{}, qui sont regroup\'ees dans le fichier de classe de mani\`ere \`a faciliter les modifications. Par défaut, les lettres sont mises en page pour être imprimées sur du papier au format DIN A4.\\[2mm]
De plus, quelques nouvelles dimensions sont d\'efinies:\\[2mm]
\cs{letterwidth}\index{letterwidth@\cs{letterwidth}}\\ 
\cs{lettermargin}\index{lettermargin@\cs{lettermargin}}\\ 
\cs{listmargin}\index{listmargin@\cs{listmargin}}\\[2mm]
\cs{openingspace}\index{openingspace@\cs{openingspace}}\\ 
\cs{openingindent}\index{openingindent@\cs{openingindent}}\\[2mm] 
\cs{sigspace}\index{sigspace@\cs{sigspace}}\\[2mm] 
\cs{ssigwidth}\index{ssigwidth@\cs{ssigwidth}}\\ 
\cs{ssigindent}\index{ssigindent@\cs{ssigindent}}\\[2mm]
\cs{msigwidth}\index{msigwidth@\cs{msigwidth}}\\[2mm] 
Ces grandeurs permettent de modifier la mise en page de diverses parties des messages. La commande \index{marge@\cs{marge}}\cs{marge} d\'ecrite \`a la page \pageref{marge} modifie les trois premi\`eres dimensions ci-dessus. \cs{openingspace} ajuste l'espace vertical autour du champ \og Sujet\fg{}. \cs{openingindent} permet de d\'efinir l'indentation de la salutation d'ouverture\footnote{Suite \`a une proposition de Daniel \fsc{Taupin}}, ind\'ependamment de \cs{parindent}\index{parindente@\cs{parindent}}.
\cs{sigspace} permet de modifier l'espacement vertical entre le texte et la ou les signatures. \cs{ssigwidth} et \cs{ssigindent} g\`erent la largeur de la bo\^{\i}te contenant une \index{signature}signature simple, et l'indentation de celle-ci. \cs{msigwidth} d\'efinit la largeur totale des signatures multiples. On aura avantage \`a bien \'etudier la classe avant de modifier ces dimensions.

\subsubsection{De l'ent\^ete}

\noindent L'ent\^ete de la lettre est configurable : les \'el\'ements sont positionn\'es par des variables d\'efinies dans le fichier de classe. Les valeurs par d\'efaut peuvent \^etre red\'efinies dans un fichier d'institut. Ces variables, d\'efinies par des macros ou par des dimensions (les largeurs des \cs{parbox} et \verb+tabular+),  sont les suivantes (d\'efaut en mm) :\\[3mm]

\noindent \textbf{L'ent\^ete des lettres} est dans une bo\^{\i}te d'ent\^ete d\'efinie par un environnement \verb+picture+ :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de largeur&	 \cs{pict@let@width}&	(185)\\
		de hauteur&	 \cs{pict@let@height}&	(65)\\
		d'offset horizontal& \cs{pict@let@hoffset}&	(0)\\
		d'offset vertical& \cs{pict@let@voffset}&	(0)\\
\end{tabular}\\[2mm]
dans laquelle on trouve un trait de pliage :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de coordonn\'ee x& \cs{rule@hpos}&		(-25)\\
		de coordonn\'ee y& \cs{rule@vpos}&		(-15)\\
		de longueur& 	 \cs{rule@length}&		(10)\\
\end{tabular}\\[2mm]
l'adresse de l'exp\'editeur dans une \cs{parbox} :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de coordonn\'ee x& \cs{fromaddress@let@hpos}&	(-10)\\
		de coordonn\'ee y& \cs{fromaddress@let@vpos}&	(70)\\
		de largeur&	 \cs{fromaddress@let@width}&	(69)\\
\end{tabular}\\[2mm]
le lieu d'exp\'edition dans une \cs{parbox} :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de coordonn\'ee x& \cs{fromlieu@let@hpos}&	(90)\\
		de coordonn\'ee y& \cs{fromlieu@let@vpos}&	(62)\\
		de largeur&	 \cs{fromlieu@let@width}&	(69)\\
\end{tabular}\\[2mm]
et l'adresse du destinataire dans une \cs{parbox} :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de coordonn\'ee x& \cs{toaddress@let@hpos}&	(90)\\
		de coordonn\'ee y& \cs{toaddress@let@vpos}&	(40)\\
		de largeur&	 \cs{toaddress@let@width}&	(80)\\
\end{tabular}\\[3mm]

\noindent\textbf{L'ent\^ete des fax} est dans une bo\^{\i}te d\'efinie par un environnement \verb+picture+ :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de largeur&	 \cs{pict@fax@width}&	(185)\\
		de hauteur&	 \cs{pict@fax@height}&	(30)\\
		d'offset horizontal& \cs{pict@fax@hoffset}&	(0)\\
		d'offset vertical& \cs{pict@fax@voffset}&	(0)\\
\end{tabular}\\[2mm]
o\`u l'on trouve l'adresse de l'exp\'editeur dans une \cs{parbox} :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de coordonn\'ee x& \cs{fromaddress@fax@hpos}&	(-10)\\
		de coordonn\'ee y& \cs{fromaddress@fax@vpos}&	(30)\\
		de largeur&	 \cs{fromaddress@fax@width}&	(69)\\
\end{tabular}\\[2mm]
et une cha\^\i{}ne (\cs{telefaxstring}) dans une \cs{parbox} :\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de coordonn\'ee x& \cs{faxstring@hpos}&	(90)\\
		de coordonn\'ee y& \cs{faxstring@vpos}&	(20)\\
		de largeur&	 \cs{faxstring@width}&	(69)\\
\end{tabular}\\[2mm]
Au dessous, une alternance de traits et de \cs{tabular}\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de largeur&	 \cs{faxbox@width}&		(170)\\
\end{tabular}\\[2mm]
o\`u l'on trouve une \cs{parbox} pour le destinataire,\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de largeur&	 \cs{toaddress@fax@width}&	(69)\\
\end{tabular}\\[2mm]
et une pour le nom de l'exp\'editeur,\\[2mm]
\begin{tabular}{p{5cm}p{5cm}p{2cm}}
		de largeur&	 \cs{fromname@fax@width}&	(69)\\
\end{tabular}



\section{Des exemples}\label{partex}

\markright{\it Partie \thesection: \rm Des exemples}
\vfill\pagebreak

\subsection{Des gabarits}

\noindent Des fichiers \og gabarit\fg{} sont disponibles sous les noms de {\tt lettre.tpl}, {\tt telefax.tpl}
et {\tt institut.tpl} dans le r\'epertoire des macros\index{macros!repertoire@r\'epertoire}, habituellement
accessible \`a travers la variable d'environnement \vers+$TEXINPUTS+. %$
Le contenu de ces fichiers permet de se rappeler les diverses commandes\index{commandes}:\\[2mm]
\noindent Fichier {\tt lettre.tpl} :\\[2mm]
{\scriptsize
\verbatiminput{\inputsdir lettre.tpl}}
\vfill\pagebreak

\noindent Fichier {\tt telefax.tpl} :\\[2mm]
{\scriptsize
\verbatiminput{\inputsdir telefax.tpl}}
\vfill\pagebreak

\noindent Fichier {\tt institut.tpl} :\\[2mm]
{\scriptsize
\verbatiminput{\inputsdir institut.tpl}}
\vfill\cleardoublepage

\subsection{Des exemples}

\noindent Les pages suivantes montrent des fichiers sources et les lettres\index{lettre} ou t\'el\'efax\index{telefax@t\'el\'efax} r\'esultants (\`a gauche) qui illustrent les diff\'erentes mises-en-page d\'efinies par les commandes de \vers+lettre.cls+. Dans la mesure du possible, la source se trouve sur la page de gauche et le r\'esultat sur
la page de droite. 
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex1_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex1-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex2_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex2-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex3_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex3-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex4_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex4-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex5_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex5-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex6_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex6-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex7_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex7-1.ps}}%
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex7-2.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{letex8_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex8-1.ps}}%
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex8-2.ps}}%
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{letex8-3.ps}}%
\vfill\pagebreak

~\vfill\pagebreak

{\scriptsize
\verbatiminput{testfaxf_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{testfaxf-1.ps}}%
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{testfaxf-2.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{testfaxe_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{testfaxe-1.ps}}%
\vfill\pagebreak

{\scriptsize
\verbatiminput{testfaxd_nl}}
\vfill\pagebreak

\epsfysize=\textheight%
\noindent\fbox{\epsfbox{testfaxd-1.ps}}%
\index{Geneve@Gen\`eve|seealso{\'ecusson}}
\index{X400|seealso{ccitt}}
\index{RFC 822|seealso{internet}}
\index{telefax@t\'el\'efax|seealso{message}}
\index{lettre|seealso{message}}
\vfill\cleardoublepage
\lettreRestaureMarges

\section{Documentation du code}
\label{sec:docum-du-code}

\DocInput{lettre.cls}

\clearpage
\lettreRedefinitMarges
\PrintIndex


\end{document}

% Local Variables:
% TeX-master: "lettre"
% eval: (TeX-PDF-mode 0)
% End: